function js_beautify(e,t){function n(e){for(e=e===void 0?!1:e;C.length&&(" "===C[C.length-1]||C[C.length-1]===S||C[C.length-1]===J||e&&("\n"===C[C.length-1]||"\r"===C[C.length-1]));)C.pop()}function o(e){return e.replace(/^\s\s*|\s\s*$/,"")}function r(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function i(){var e=Q;Q=!1,a(),Q=e}function a(e,t){if(w.eat_next_space=!1,(!Q||!p(w.mode))&&(e=e===void 0?!0:e,t=t===void 0?!0:t,t&&(w.if_line=!1,w.chain_extra_indentation=0),n(),C.length)){"\n"===C[C.length-1]&&e||(L=!0,C.push("\n")),J&&C.push(J);for(var o=0;w.indentation_level+w.chain_extra_indentation>o;o+=1)C.push(S);w.var_line&&w.var_line_reindented&&C.push(S)}}function s(){if("TK_COMMENT"===O)return a();if(w.eat_next_space)return w.eat_next_space=!1,void 0;var e=" ";C.length&&(e=C[C.length-1])," "!==e&&"\n"!==e&&e!==S&&C.push(" ")}function c(){L=!1,w.eat_next_space=!1,C.push(I)}function u(){w.indentation_level+=1}function m(){C.length&&C[C.length-1]===S&&C.pop()}function l(e){w&&E.push(w),w={previous_mode:w?w.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,chain_extra_indentation:0,in_case_statement:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_level:w?w.indentation_level+(w.var_line&&w.var_line_reindented?1:0):0,ternary_depth:0}}function p(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function h(e){return y(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function d(){if(K="DO_BLOCK"===w.mode,E.length>0){var e=w.mode;w=E.pop(),w.previous_mode=e}}function g(e,t){for(var n=0;e.length>n;n++){var r=o(e[n]);if(r.charAt(0)!==t)return!1}return!0}function f(e){return y(e,["case","return","do","if","throw","else"])}function y(e,t){for(var n=0;t.length>n;n+=1)if(t[n]===e)return!0;return!1}function b(e){for(var t=D,n=v.charAt(t);y(n,N)&&n!==e;){if(t++,t>=$)return 0;n=v.charAt(t)}return n}function x(){var e,t;if(W=0,D>=$)return["","TK_EOF"];M=!1;var r=v.charAt(D);D+=1;var i=Q&&p(w.mode);if(i){for(var s=0;y(r,N);){if("\n"===r?(n(),C.push("\n"),L=!0,s=0):"	"===r?s+=4:"\r"===r||(s+=1),D>=$)return["","TK_EOF"];r=v.charAt(D),D+=1}if(L)for(e=0;s>e;e++)C.push(" ")}else{for(;y(r,N);){if("\n"===r&&(W+=H?H>=W?1:0:1),D>=$)return["","TK_EOF"];r=v.charAt(D),D+=1}if(Z&&W>1)for(e=0;W>e;e+=1)a(0===e),L=!0;M=W>0}if(y(r,k)){if($>D)for(;y(v.charAt(D),k)&&(r+=v.charAt(D),D+=1,D!==$););if(D!==$&&r.match(/^[0-9]+[Ee]$/)&&("-"===v.charAt(D)||"+"===v.charAt(D))){var c=v.charAt(D);D+=1;var u=x();return r+=c+u[0],[r,"TK_WORD"]}return"in"===r?[r,"TK_OPERATOR"]:(!M||"TK_OPERATOR"===O||"TK_EQUALS"===O||w.if_line||!Z&&"var"===_||a(),[r,"TK_WORD"])}if("("===r||"["===r)return[r,"TK_START_EXPR"];if(")"===r||"]"===r)return[r,"TK_END_EXPR"];if("{"===r)return[r,"TK_START_BLOCK"];if("}"===r)return[r,"TK_END_BLOCK"];if(";"===r)return[r,"TK_SEMICOLON"];if("/"===r){var m="",l=!0;if("*"===v.charAt(D)){if(D+=1,$>D)for(;$>D&&("*"!==v.charAt(D)||!v.charAt(D+1)||"/"!==v.charAt(D+1))&&(r=v.charAt(D),m+=r,("\n"===r||"\r"===r)&&(l=!1),D+=1,!(D>=$)););return D+=2,l&&0===W?["/*"+m+"*/","TK_INLINE_COMMENT"]:["/*"+m+"*/","TK_BLOCK_COMMENT"]}if("/"===v.charAt(D)){for(m=r;"\r"!==v.charAt(D)&&"\n"!==v.charAt(D)&&(m+=v.charAt(D),D+=1,!(D>=$)););return M&&a(),[m,"TK_COMMENT"]}}if("'"===r||'"'===r||"/"===r&&("TK_WORD"===O&&f(_)||")"===_&&y(w.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMA"===O||"TK_COMMENT"===O||"TK_START_EXPR"===O||"TK_START_BLOCK"===O||"TK_END_BLOCK"===O||"TK_OPERATOR"===O||"TK_EQUALS"===O||"TK_EOF"===O||"TK_SEMICOLON"===O)){var h=r,d=!1,g=0,b=0;if(t=r,$>D)if("/"===h){for(var I=!1;d||I||v.charAt(D)!==h;)if(t+=v.charAt(D),d?d=!1:(d="\\"===v.charAt(D),"["===v.charAt(D)?I=!0:"]"===v.charAt(D)&&(I=!1)),D+=1,D>=$)return[t,"TK_STRING"]}else for(;d||v.charAt(D)!==h;)if(t+=v.charAt(D),g&&g>=b&&(g=parseInt(t.substr(-b),16),g&&g>=32&&126>=g&&(g=String.fromCharCode(g),t=t.substr(0,t.length-b-2)+(g===h||"\\"===g?"\\":"")+g),g=0),g?g++:d?(d=!1,q&&("x"===v.charAt(D)?(g++,b=2):"u"===v.charAt(D)&&(g++,b=4))):d="\\"===v.charAt(D),D+=1,D>=$)return[t,"TK_STRING"];if(D+=1,t+=h,"/"===h)for(;$>D&&y(v.charAt(D),k);)t+=v.charAt(D),D+=1;return[t,"TK_STRING"]}if("#"===r){if(0===C.length&&"!"===v.charAt(D)){for(t=r;$>D&&"\n"!==r;)r=v.charAt(D),t+=r,D+=1;return C.push(o(t)+"\n"),a(),x()}var T="#";if($>D&&y(v.charAt(D),B)){do r=v.charAt(D),T+=r,D+=1;while($>D&&"#"!==r&&"="!==r);return"#"===r||("["===v.charAt(D)&&"]"===v.charAt(D+1)?(T+="[]",D+=2):"{"===v.charAt(D)&&"}"===v.charAt(D+1)&&(T+="{}",D+=2)),[T,"TK_WORD"]}}if("<"===r&&"<!--"===v.substring(D-1,D+3)){for(D+=3,r="<!--";"\n"!==v.charAt(D)&&$>D;)r+=v.charAt(D),D++;return w.in_html_comment=!0,[r,"TK_COMMENT"]}if("-"===r&&w.in_html_comment&&"-->"===v.substring(D-1,D+2))return w.in_html_comment=!1,D+=2,M&&a(),["-->","TK_COMMENT"];if("."===r)return[r,"TK_DOT"];if(y(r,R)){for(;$>D&&y(r+v.charAt(D),R)&&(r+=v.charAt(D),D+=1,!(D>=$)););return","===r?[r,"TK_COMMA"]:"="===r?[r,"TK_EQUALS"]:[r,"TK_OPERATOR"]}return[r,"TK_UNKNOWN"]}var v,C,I,O,_,T,A,w,E,S,N,k,R,D,j,B,G,P,K,M,L,W,J="";t=t?t:{};var U;void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(U=t.braces_on_own_line?"expand":"collapse"),U=t.brace_style?t.brace_style:U?U:"collapse";var F=t.indent_size?t.indent_size:4,V=t.indent_char?t.indent_char:" ",Z=t.preserve_newlines===void 0?!0:t.preserve_newlines,X=t.break_chained_methods===void 0?!1:t.break_chained_methods,H=t.max_preserve_newlines===void 0?!1:t.max_preserve_newlines,Y="undefined"===t.jslint_happy?!1:t.jslint_happy,Q=t.keep_array_indentation===void 0?!1:t.keep_array_indentation,z=t.space_before_conditional===void 0?!0:t.space_before_conditional,q=t.unescape_strings===void 0?!1:t.unescape_strings;L=!1;var $=e.length;for(S="";F>0;)S+=V,F-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)J+=e.charAt(0),e=e.substring(1);for(v=e,A="",O="TK_START_EXPR",_="",T="",C=[],K=!1,N="\n\r	 ".split(""),k="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),B="0123456789".split(""),R="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",R+=" <%= <% %> <?= <? ?>",R=R.split(" "),j="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),E=[],l("BLOCK"),D=0;;){var et=x();if(I=et[0],P=et[1],"TK_EOF"===P)break;switch(P){case"TK_START_EXPR":if("["===I){if("TK_WORD"===O||")"===_){y(_,j)&&s(),l("(EXPRESSION)"),c();break}"[EXPRESSION]"===w.mode||"[INDENTED-EXPRESSION]"===w.mode?"]"===T&&","===_?("[EXPRESSION]"===w.mode&&(w.mode="[INDENTED-EXPRESSION]",Q||u()),l("[EXPRESSION]"),Q||a()):"["===_?("[EXPRESSION]"===w.mode&&(w.mode="[INDENTED-EXPRESSION]",Q||u()),l("[EXPRESSION]"),Q||a()):l("[EXPRESSION]"):l("[EXPRESSION]")}else"for"===A?l("(FOR-EXPRESSION)"):y(A,["if","while"])?l("(COND-EXPRESSION)"):l("(EXPRESSION)");";"===_||"TK_START_BLOCK"===O?a():"TK_END_EXPR"===O||"TK_START_EXPR"===O||"TK_END_BLOCK"===O||"."===_?M&&a():"TK_WORD"!==O&&"TK_OPERATOR"!==O?s():"function"===A||"typeof"===A?Y&&s():(y(_,j)||"catch"===_)&&z&&s(),c();break;case"TK_DOT":f(_)?s():")"===_&&(X||M)&&(w.chain_extra_indentation=1,a(!0,!1)),c();break;case"TK_END_EXPR":if("]"===I)if(Q){if("}"===_){m(),c(),d();break}}else if("[INDENTED-EXPRESSION]"===w.mode&&"]"===_){d(),a(),c();break}d(),c();break;case"TK_START_BLOCK":if("do"===A?l("DO_BLOCK"):l("BLOCK"),"expand"===U||"expand-strict"===U){var tt=!1;"expand-strict"===U?(tt="}"===b(),tt||a(!0)):"TK_OPERATOR"!==O&&("="===_||f(_)&&"else"!==_?s():a(!0)),c(),tt||u()}else"TK_OPERATOR"!==O&&"TK_START_EXPR"!==O?"TK_START_BLOCK"===O?a():s():p(w.previous_mode)&&","===_&&("}"===T?s():a()),u(),c();break;case"TK_END_BLOCK":d(),"expand"===U||"expand-strict"===U?("{"!==_&&a(),c()):("TK_START_BLOCK"===O?L?m():n():p(w.mode)&&Q?(Q=!1,a(),Q=!0):a(),c());break;case"TK_WORD":if(K){s(),c(),s(),K=!1;break}if(G="NONE","function"===I){if(w.var_line&&"TK_EQUALS"!==O&&(w.var_line_reindented=!0),(L||";"===_)&&"{"!==_&&"TK_BLOCK_COMMENT"!==O&&"TK_COMMENT"!==O){W=L?W:0,Z||(W=1);for(var nt=0;2-W>nt;nt++)a(!1)}"TK_WORD"===O?"get"===_||"set"===_||"new"===_||"return"===_?s():a():"TK_OPERATOR"===O||"="===_?s():h(w.mode)||a(),c(),A=I;break}if("case"===I||"default"===I&&w.in_case_statement){a(),w.case_body&&(w.indentation_level--,w.case_body=!1,m()),c(),w.in_case=!0,w.in_case_statement=!0;break}"TK_END_BLOCK"===O?y(I.toLowerCase(),["else","catch","finally"])?"expand"===U||"end-expand"===U||"expand-strict"===U?G="NEWLINE":(G="SPACE",s()):G="NEWLINE":"TK_SEMICOLON"!==O||"BLOCK"!==w.mode&&"DO_BLOCK"!==w.mode?"TK_SEMICOLON"===O&&h(w.mode)?G="SPACE":"TK_STRING"===O?G="NEWLINE":"TK_WORD"===O?("else"===_&&n(!0),G="SPACE"):"TK_START_BLOCK"===O?G="NEWLINE":"TK_END_EXPR"===O&&(s(),G="NEWLINE"):G="NEWLINE",y(I,j)&&")"!==_&&(G="else"===_?"SPACE":"NEWLINE"),w.if_line&&"TK_END_EXPR"===O&&(w.if_line=!1),y(I.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==O||"expand"===U||"end-expand"===U||"expand-strict"===U?a():(n(!0),s()):"NEWLINE"===G?f(_)?s():"TK_END_EXPR"!==O?"TK_START_EXPR"===O&&"var"===I||":"===_||("if"===I&&"else"===A&&"{"!==_?s():(w.var_line=!1,w.var_line_reindented=!1,a())):y(I,j)&&")"!==_&&(w.var_line=!1,w.var_line_reindented=!1,a()):p(w.mode)&&","===_&&"}"===T?a():"SPACE"===G&&s(),c(),A=I,"var"===I&&(w.var_line=!0,w.var_line_reindented=!1,w.var_line_tainted=!1),"if"===I&&(w.if_line=!0),"else"===I&&(w.if_line=!1);break;case"TK_SEMICOLON":c(),w.var_line=!1,w.var_line_reindented=!1,"OBJECT"===w.mode&&(w.mode="BLOCK");break;case"TK_STRING":"TK_END_EXPR"===O&&y(w.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?s():"TK_COMMENT"===O||"TK_STRING"===O||"TK_START_BLOCK"===O||"TK_END_BLOCK"===O||"TK_SEMICOLON"===O?a():"TK_WORD"===O?s():Z&&M&&(a(),C.push(S)),c();break;case"TK_EQUALS":w.var_line&&(w.var_line_tainted=!0),s(),c(),s();break;case"TK_COMMA":if(w.var_line){if((h(w.mode)||"TK_END_BLOCK"===O)&&(w.var_line_tainted=!1),w.var_line_tainted){c(),w.var_line_reindented=!0,w.var_line_tainted=!1,a();break}w.var_line_tainted=!1,c(),s();break}"TK_COMMENT"===O&&a(),"TK_END_BLOCK"===O&&"(EXPRESSION)"!==w.mode?(c(),"OBJECT"===w.mode&&"}"===_?a():s()):"OBJECT"===w.mode?(c(),a()):(c(),s());break;case"TK_OPERATOR":var ot=!0,rt=!0;if(f(_)){s(),c();break}if("*"===I&&"TK_DOT"===O&&!T.match(/^\d+$/)){c();break}if(":"===I&&w.in_case){w.case_body=!0,u(),c(),a(),w.in_case=!1;break}if("::"===I){c();break}y(I,["--","++","!"])||y(I,["-","+"])&&(y(O,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||y(_,j)||","==_)?(ot=!1,rt=!1,";"===_&&h(w.mode)&&(ot=!0),"TK_WORD"===O&&y(_,j)&&(ot=!0),"BLOCK"!==w.mode||"{"!==_&&";"!==_||a()):":"===I?0===w.ternary_depth?("BLOCK"===w.mode&&(w.mode="OBJECT"),ot=!1):w.ternary_depth-=1:"?"===I&&(w.ternary_depth+=1),ot&&s(),c(),rt&&s();break;case"TK_BLOCK_COMMENT":var it,at=r(I);if(g(at.slice(1),"*"))for(a(),C.push(at[0]),it=1;at.length>it;it++)a(),C.push(" "),C.push(o(at[it]));else for(at.length>1?a():"TK_END_BLOCK"===O?a():s(),it=0;at.length>it;it++)C.push(at[it]),C.push("\n");"\n"!==b("\n")&&a();break;case"TK_INLINE_COMMENT":s(),c(),h(w.mode)?s():i();break;case"TK_COMMENT":","!==_||M||n(!0),"TK_COMMENT"!==O&&(M?a():s()),c(),a();break;case"TK_UNKNOWN":c()}T=_,O=P,_=I}var st=J+C.join("").replace(/[\r\n ]+$/,"");return st}function css_beautify(e,t){function n(){return h=e.charAt(++g)}function o(){return e.charAt(g+1)}function r(t){for(var o=g;n();)if("\\"==h)n(),n();else{if(h==t)break;if("\n"==h)break}return e.substring(o,g+1)}function i(){for(var e=g;d.test(o());)g++;return g!=e}function a(){var e=g;do;while(d.test(n()));return g!=e+1}function s(){var t=g;for(n();n();)if("*"==h&&"/"==o()){g++;break}return e.substring(t,g+1)}function c(e,t){return v.slice(-e.length+(t||0),t).join("").toLowerCase()==e}function u(){b++,f+=y}function m(){b--,f=f.slice(0,-l)}t=t||{};var l=t.indent_size||4,p=t.indent_char||" ";"string"==typeof l&&(l=parseInt(l));var h,d=/^\s+$/,g=-1,f=e.match(/^[\r\n]*[\t ]*/)[0],y=Array(l+1).join(p),b=0,x={};x["{"]=function(e){x.singleSpace(),v.push(e),x.newLine()},x["}"]=function(e){x.newLine(),v.push(e),x.newLine()},x.newLine=function(e){if(!e)for(;d.test(v[v.length-1]);)v.pop();v.length&&v.push("\n"),f&&v.push(f)},x.singleSpace=function(){v.length&&!d.test(v[v.length-1])&&v.push(" ")};var v=[];for(f&&v.push(f);;){var C=a();if(!h)break;"{"==h?(u(),x["{"](h)):"}"==h?(m(),x["}"](h)):'"'==h||"'"==h?v.push(r(h)):";"==h?v.push(h,"\n",f):"/"==h&&"*"==o()?(x.newLine(),v.push(s(),"\n",f)):"("==h?c("url",-1)?(v.push(h),i(),n()&&(")"!=h&&'"'!=h&&"'"!=h?v.push(r(")")):g--)):(C&&x.singleSpace(),v.push(h),i()):")"==h?v.push(h):","==h?(i(),v.push(h),x.singleSpace()):"]"==h?v.push(h):"["==h||"="==h?(i(),v.push(h)):(C&&x.singleSpace(),v.push(h))}var I=v.join("").replace(/[\n ]+$/,"");return I}function style_html(e,t){function n(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(e,t){for(var n=0;t.length>n;n++)if(e===t[n])return!0;return!1}},this.get_content=function(){for(var e="",t=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(e,this.Utils.whitespace))t.length&&(n=!0),this.line_char_count--;else{if(n){if(this.line_char_count>=this.max_char){t.push("\n");for(var o=0;this.indent_level>o;o++)t.push(this.indent_string);this.line_char_count=0}else t.push(" "),this.line_char_count++;n=!1}t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var o=n.exec(this.input),r=o?o.index:this.input.length;return r>this.pos&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.get_tag=function(){var e,t,n="",o=[],r=!1;do{if(this.pos>=this.input.length)return o.length?o.join(""):["","TK_EOF"];n=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(n,this.Utils.whitespace)?(r=!0,this.line_char_count--):(("'"===n||'"'===n)&&(o[1]&&"!"===o[1]||(n+=this.get_unformatted(n),r=!0)),"="===n&&(r=!1),o.length&&"="!==o[o.length-1]&&">"!==n&&r&&(this.line_char_count>=this.max_char?(this.print_newline(!1,o),this.line_char_count=0):(o.push(" "),this.line_char_count++),r=!1),"<"===n&&(e=this.pos-1),o.push(n))}while(">"!==n);var i,a=o.join("");i=-1!=a.indexOf(" ")?a.indexOf(" "):a.indexOf(">");var s=a.substring(1,i).toLowerCase();if("/"===a.charAt(a.length-2)||this.Utils.in_array(s,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===s)this.record_tag(s),this.tag_type="SCRIPT";else if("style"===s)this.record_tag(s),this.tag_type="STYLE";else if(this.Utils.in_array(s,c)){var u=this.get_unformatted("</"+s+">",a);o.push(u),e>0&&this.Utils.in_array(this.input.charAt(e-1),this.Utils.whitespace)&&o.splice(0,0,this.input.charAt(e-1)),t=this.pos-1,this.Utils.in_array(this.input.charAt(t+1),this.Utils.whitespace)&&o.push(this.input.charAt(t+1)),this.tag_type="SINGLE"}else if("!"===s.charAt(0))if(-1!=s.indexOf("[if")){if(-1!=a.indexOf("!IE")){var u=this.get_unformatted("-->",a);o.push(u)}this.tag_type="START"}else if(-1!=s.indexOf("[endif"))this.tag_type="END",this.unindent();else if(-1!=s.indexOf("[cdata[")){var u=this.get_unformatted("]]>",a);o.push(u),this.tag_type="SINGLE"}else{var u=this.get_unformatted("-->",a);o.push(u),this.tag_type="SINGLE"}else"/"===s.charAt(0)?(this.retrieve_tag(s.substring(1)),this.tag_type="END"):(this.record_tag(s),this.tag_type="START"),this.Utils.in_array(s,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return o.join("")},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var n="",o="",r=!0;do{if(this.pos>=this.input.length)return o;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!r){this.line_char_count--;continue}if("\n"===n||"\r"===n){o+="\n",this.line_char_count=0;continue}}o+=n,this.line_char_count++,r=!0}while(-1==o.toLowerCase().indexOf(e));return o},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"===this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,1>e?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,o,r){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=r,this.indent_level=0,this.max_char=o,this.line_char_count=0;for(var i=0;this.indent_size>i;i++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){if(this.line_char_count=0,t&&t.length){if(!e)for(;this.Utils.in_array(t[t.length-1],this.Utils.whitespace);)t.pop();t.push("\n");for(var n=0;this.indent_level>n;n++)t.push(this.indent_string)}},this.print_token=function(e){this.output.push(e)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var o,r,i,a,s,c;for(t=t||{},r=t.indent_size||4,i=t.indent_char||" ",s=t.brace_style||"collapse",a=0==t.max_char?1/0:t.max_char||70,c=t.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],o=new n,o.printer(e,i,r,a,s);;){var u=o.get_token();if(o.token_text=u[0],o.token_type=u[1],"TK_EOF"===o.token_type)break;switch(o.token_type){case"TK_TAG_START":o.print_newline(!1,o.output),o.print_token(o.token_text),o.indent(),o.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":o.print_newline(!1,o.output),o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===o.last_token&&""===o.last_text){var m=o.token_text.match(/\w+/)[0],l=o.output[o.output.length-1].match(/<\s*(\w+)/);(null===l||l[1]!==m)&&o.print_newline(!0,o.output)}o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var p=o.token_text.match(/^\s*<([a-z]+)/i);p&&o.Utils.in_array(p[1],c)||o.print_newline(!1,o.output),o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_CONTENT":""!==o.token_text&&o.print_token(o.token_text),o.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==o.token_text){o.output.push("\n");var h=o.token_text;if("TK_SCRIPT"==o.token_type)var d="function"==typeof js_beautify&&js_beautify;else if("TK_STYLE"==o.token_type)var d="function"==typeof css_beautify&&css_beautify;if("keep"==t.indent_scripts)var g=0;else if("separate"==t.indent_scripts)var g=-o.indent_level;else var g=1;var f=o.get_full_indent(g);if(d)h=d(h.replace(/^\s*/,f),t);else{var y=h.match(/^\s*/)[0],b=y.match(/[^\n\r]*$/)[0].split(o.indent_string).length-1,x=o.get_full_indent(g-b);h=h.replace(/^\s*/,f).replace(/\r\n|\r|\n/g,"\n"+x).replace(/\s*$/,"")}h&&(o.print_token(h),o.print_newline(!0,o.output))}o.current_mode="TAG"}o.last_token=o.token_type,o.last_text=o.token_text}return o.output.join("")}var IO=window.IO={events:{},preventDefault:!1,register:function(e,t,n){return this.events[e]||(this.events[e]=[]),this.events[e].push({fun:t,thisArg:n,args:Array.prototype.slice.call(arguments,3)}),this},unregister:function(e,t){return this.events[e]?(this.events[e]=this.events[e].filter(function(e){return e.fun!==t}),this):this},fire:function(e){function t(e){var t=e.fun.apply(e.thisArg,e.args.concat(n));o.preventDefault=t===!1}if(this.preventDefault=!1,this.events[e]){var n=Array.prototype.slice.call(arguments,1),o=this;this.events[e].forEach(t)}},urlstringify:function(){var e={number:!0,string:!0,"boolean":!0},t=function(t){return typeof t in e?encodeURIComponent(""+t):""},n=function(e,n){return e=t(e),n.map(function(t){return o(e,t,!0)}).join("&")},o=function(e,n,o){return o||(e=t(e)),e+"="+t(n)};return function(e){return Object.keys(e).map(function(t){var r=e[t];return Array.isArray(r)?n(t,r):o(t,r)}).join("&")}}(),loadScript:function(e,t){var n=document.createElement("script");n.src=e,n.onload=t,document.head.appendChild(n)}};IO.decodehtmlEntities=function(){var e;e={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪","int":"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",zwnj:""};var t=/&(#x?)?[\w;]+?;/g,n=function(e){return e.slice(1).split(";").map(o).join("")},o=function(t){return t?"#"===t[0]?r(t):e.hasOwnProperty(t)?e[t]:"&"+t+";":""},r=function(e){e=e.slice(1);var t;return t="x"===e[0]?parseInt(e.slice(1),16):parseInt(e,10),String.fromCharCode(t)};return function(e){return e.replace(t,n)}}(),["in","out"].forEach(function(e){var t=e+"put";IO[e]={buffer:[],receive:function(e){return IO.fire("receive"+t,e),IO.preventDefault?this:(this.buffer.push(e),this)},tick:function(){return this.buffer.length&&IO.fire(t,this.buffer.shift()),this},flush:function(){if(IO.fire("before"+t),!this.buffer.length)return this;for(var e=this.buffer.length;e-->0;)this.tick();return IO.fire("after"+t),this.buffer=[],this}}}),IO.CBuffer=function(e){var t={items:[],pos:0,size:e};return t.add=function(t){this.pos===e&&(this.pos=0),this.items[this.pos]=t,this.pos+=1},t.contains=function(e){return this.items.indexOf(e)>-1},t},IO.xhr=function(e){e=Object.merge({method:"GET",headers:{},complete:function(){}},e),e.headers=Object.merge({"Content-Type":"application/x-www-form-urlencoded"},e.headers),"object"!=typeof e.data||e.data.charAt||(e.data=IO.urlstringify(e.data));var t=new XMLHttpRequest;return t.open(e.method,e.url),t.addEventListener("readystatechange",function(){4===t.readyState&&e.complete.call(e.thisArg,t.responseText,t)}),Object.iterate(e.headers,function(e,n){t.setRequestHeader(e,n)}),t.send(e.data),t},IO.jsonp=function(e){e.data=e.data||{},e.jsonpName=e.jsonpName||"jsonp";var t,n=document.createElement("script");do t="IO"+Date.now()*Math.ceil(Math.random());while(window[t]);window[t]=function(){e.fun.apply(e.thisArg,arguments),delete window[t],n.parentNode.removeChild(n)},e.data[e.jsonpName]=t,-1===e.url.indexOf("?")&&(e.url+="?"),e.url+=this.urlstringify(e.data),n.src=e.url,document.head.appendChild(n)},IO.jsonp.ddg=function(e,t){IO.jsonp({url:"http://api.duckduckgo.com/",jsonpName:"callback",data:{format:"json",q:e},fun:t})},IO.jsonp.google=function(e,t){IO.jsonp({url:"http://ajax.googleapis.com/ajax/services/search/web",jsonpName:"callback",data:{v:"1.0",q:e},fun:t})},function(){"use strict";var e=window.bot={invocationPattern:"!!",commandRegex:/^\/\s*([\w\-$]+)(?:\s(.+))?$/,commands:{},commandDictionary:null,listeners:[],info:{invoked:0,learned:0,forgotten:0,start:new Date},users:{},parseMessage:function(t){if(!this.validateMessage(t))return e.log(t,"parseMessage invalid"),void 0;var n=this.prepareMessage(t),o=n.get("user_id");if(e.log(n,"parseMessage valid"),this.banlist.contains(o))return e.log(t,"parseMessage banned"),this.banlist[o].told||(n.reply("You iz in mindjail"),this.banlist[o].told=!0),void 0;try{n.startsWith(">")?this.eval(n):n.startsWith("/")?this.parseCommand(n):this.callListeners(n)||n.reply(this.giveUpMessage(n))}catch(r){var i="Could not process input. Error: "+r.message;r.lineNumber&&(i+=" on line "+r.lineNumber),r.column&&(i+=" on column "+r.column),n.directreply(i),console.dir(r)}finally{this.info.invoked+=1}},giveUpMessage:function(e){var t="Y U NO MAEK SENSE!? Could not understand "+this.adapter.codify(e),n=e.trim().split(" ")[0],o=this.getCommand(n);return(!o.error||o.guesses.length)&&(t+=" (perhaps you meant to execute a command? If so, prepend the command name with a /)"),t},prepareMessage:function(e){e=this.adapter.transform(e);var t=IO.decodehtmlEntities(e.content);return this.Message(t.slice(this.invocationPattern.length).trim(),e)},parseCommand:function(t){e.log(t,"parseCommand input");var n=this.commandRegex.exec(t);if(!n)return t.reply("Invalid command "+t),void 0;e.log(n,"parseCommand matched");var o=n[1].toLowerCase(),r=this.getCommand(o);if(this.personality.check(o)&&this.personality.command(),r.error)return t.reply(r.error),void 0;if(!r.canUse(t.get("user_id")))return t.reply(["You do not have permission to use the command "+o,"I'm afraid I can't let you do that, "+t.get("user_name")].random()),void 0;e.log(r,"parseCommand calling");var i=this.Message(t.replace(/^\/\s*/,"").slice(o.length).trim(),t.get()),a=r.exec(i);a&&t.reply(a)},validateMessage:function(e){var t=e.content.trim();return t.startsWith(this.invocationPattern)},addCommand:function(e){e.exec&&e.del||(e=this.Command(e)),e.learned&&(this.info.learned+=1),e.invoked=0,this.commands[e.name]=e,this.commandDictionary.trie.add(e.name)},commandExists:function(e){return this.commands.hasOwnProperty(e)},getCommand:function(e){if(this.commandExists(e))return this.commands[e];this.commandDictionary.maxCost=Math.floor(e.length/5+1);var t="Command "+e+" does not exist.",n=this.commandDictionary.search(e);return n.length&&(t+=" Did you mean: "+n.join(", ")),{error:t,guesses:n}},listen:function(e,t,n){Array.isArray(e)?e.forEach(function(e){this.listen(e,t,n)},this):this.listeners.push({pattern:e,fun:t,thisArg:n})},callListeners:function(t){return this.listeners.some(function(n){var o,r=t.exec(n.pattern);return r?(o=n.fun.call(n.thisArg,t),e.log(r,o),o&&t.reply(o),o!==!1):void 0})},stoplog:!1,log:function(){this.stoplog||console.log.apply(console,arguments)},stop:function(){this.stopped=!0},"continue":function(){this.stopped=!1}};e.banlist=JSON.parse(localStorage.bot_ban||"{}"),Array.isArray(e.banlist)&&(e.banlist=e.banlist.reduce(function(e,t){return e[t]={told:!1},e},{})),e.banlist.contains=function(e){return this.hasOwnProperty(e)},e.banlist.add=function(e){this[e]={told:!1},this.save()},e.banlist.remove=function(e){this.contains(e)&&(delete this[e],this.save())},e.banlist.save=function(){localStorage.bot_ban=JSON.stringify(this)},e.Command=function(t){return t.name=t.name.toLowerCase(),t.permissions=t.permissions||{},t.permissions.use=t.permissions.use||"ALL",t.permissions.del=t.permissions.del||"NONE",t.description=t.description||"",t.creator=t.creator||"God",t.invoked=0,["Use","Del"].forEach(function(n){var o=n.toLowerCase();t["can"+n]=function(t){var n=this.permissions[o];return"ALL"===n||"NONE"!==n&&("OWNER"===n&&e.isOwner(t)||n.indexOf(t)>-1)}}),t.exec=function(){return this.invoked+=1,this.fun.apply(this.thisArg,arguments)},t.del=function(){e.info.forgotten+=1,delete e.commands[t.name]},t},e.CommunityCommand=function(t,n){function o(t){if(c.call(i,t))return!1;r();var o=Object.keys(a).length,s=n-o-1;return e.log(a,o,n),t in a?"Already registered; still need {0} more".supplant(s):s>0?(a[t]=new Date,"Registered; need {0} more to execute".supplant(s-1)):(e.log("should execute"),!1)}function r(){function e(e,n){return t>e[n]&&delete e[n],e}var t=new Date;t.setMinutes(t.getMinutes()-10),Object.keys(a).reduce(e,a)}var i=this.Command(t),a={},s=i.exec,c=i.canUse;return n=n||2,i.canUse=function(){return!0},i.exec=function(t){var n=o(t.get("user_id"));return n?(e.log(n),n):s.apply(i,arguments)},i},e.Message=function(t,n){var o=Object(t);o.content=t;var r={send:function(t){e.adapter.out.add(t,n.room_id)},reply:function(t){var o=e.adapter.reply(n.user_name);this.send(o+" "+t)},directreply:function(t){var o=e.adapter.directreply(n.message_id);this.send(o+" "+t)},parse:function(o,r){!!o===o&&(r=o,o=t);var i=e.parseCommandArgs(o||t);return r?i.map(function(t){return e.Message(t,n)}):i},exec:function(e){var n=e.exec(t);return this.matches=n?n:[],n},findUserid:function(t){t=t.toLowerCase().replace(/\s/g,"");var n=Object.keys(e.users);return n.first(function(n){var o=e.users[n].name.toLowerCase().replace(/\s/g,"");return o===t})||-1}.memoize(),codify:e.adapter.codify.bind(e.adapter),escape:e.adapter.escape.bind(e.adapter),link:e.adapter.link.bind(e.adapter),get:function(e){return e?n[e]:n},set:function(e,t){return n[e]=t}};return Object.iterate(r,function(e,t){o[e]=t}),o},e.isOwner=function(e){var t=this.users[e];return t&&(t.is_owner||t.is_moderator)},IO.register("input",e.parseMessage,e),e.beatInterval=5e3,function t(){e.beat=setTimeout(function(){IO.fire("heartbeat"),t()},e.beatInterval)}(),e.eval=function(){function e(e){console.log(e,"eval answerObj");var n,o=e.answer,r=e.log;return n=t(o),r&&r.length&&(n+=" Logged: "+t(r)),n}function t(e){var t;return t=e.length>400?"`"+e.slice(0,400)+"` (snip)":"`"+e+"`"
}window.URL=window.URL||window.webkitURL||window.mozURL||null;var n=atob("dmFyIGdsb2JhbCA9IHRoaXM7CgovKm1vc3QgZXh0cmEgZnVuY3Rpb25zIGNvdWxkIGJlIHBvc3NpYmx5IHVuc2FmZSovCnZhciB3aGl0ZXkgPSB7CgknQXJyYXknICAgICAgICAgICAgICA6IDEsCgknQm9vbGVhbicgICAgICAgICAgICA6IDEsCgknRGF0ZScgICAgICAgICAgICAgICA6IDEsCgknRXJyb3InICAgICAgICAgICAgICA6IDEsCgknRXZhbEVycm9yJyAgICAgICAgICA6IDEsCgknRnVuY3Rpb24nICAgICAgICAgICA6IDEsCgknSW5maW5pdHknICAgICAgICAgICA6IDEsCgknSlNPTicgICAgICAgICAgICAgICA6IDEsCgknTWF0aCcgICAgICAgICAgICAgICA6IDEsCgknTmFOJyAgICAgICAgICAgICAgICA6IDEsCgknTnVtYmVyJyAgICAgICAgICAgICA6IDEsCgknT2JqZWN0JyAgICAgICAgICAgICA6IDEsCgknUmFuZ2VFcnJvcicgICAgICAgICA6IDEsCgknUmVmZXJlbmNlRXJyb3InICAgICA6IDEsCgknUmVnRXhwJyAgICAgICAgICAgICA6IDEsCgknU3RyaW5nJyAgICAgICAgICAgICA6IDEsCgknU3ludGF4RXJyb3InICAgICAgICA6IDEsCgknVHlwZUVycm9yJyAgICAgICAgICA6IDEsCgknVVJJRXJyb3InICAgICAgICAgICA6IDEsCgknYXRvYicgICAgICAgICAgICAgICA6IDEsCgknYnRvYScgICAgICAgICAgICAgICA6IDEsCgknZGVjb2RlVVJJJyAgICAgICAgICA6IDEsCgknZGVjb2RlVVJJQ29tcG9uZW50JyA6IDEsCgknZW5jb2RlVVJJJyAgICAgICAgICA6IDEsCgknZW5jb2RlVVJJQ29tcG9uZW50JyA6IDEsCgknZXZhbCcgICAgICAgICAgICAgICA6IDEsCgknZ2xvYmFsJyAgICAgICAgICAgICA6IDEsCgknaXNGaW5pdGUnICAgICAgICAgICA6IDEsCgknaXNOYU4nICAgICAgICAgICAgICA6IDEsCgknb25tZXNzYWdlJyAgICAgICAgICA6IDEsCgkncGFyc2VGbG9hdCcgICAgICAgICA6IDEsCgkncGFyc2VJbnQnICAgICAgICAgICA6IDEsCgkncG9zdE1lc3NhZ2UnICAgICAgICA6IDEsCgknc2VsZicgICAgICAgICAgICAgICA6IDEsCgkndW5kZWZpbmVkJyAgICAgICAgICA6IDEsCgknd2hpdGV5JyAgICAgICAgICAgICA6IDEsCgoJLyogdHlwZWQgYXJyYXlzIGFuZCBzaGl0ICovCgknQXJyYXlCdWZmZXInICAgICAgIDogMSwKCSdCbG9iJyAgICAgICAgICAgICAgOiAxLAoJJ0Zsb2F0MzJBcnJheScgICAgICA6IDEsCgknRmxvYXQ2NEFycmF5JyAgICAgIDogMSwKCSdJbnQ4QXJyYXknICAgICAgICAgOiAxLAoJJ0ludDE2QXJyYXknICAgICAgICA6IDEsCgknSW50MzJBcnJheScgICAgICAgIDogMSwKCSdVaW50OEFycmF5JyAgICAgICAgOiAxLAoJJ1VpbnQxNkFycmF5JyAgICAgICA6IDEsCgknVWludDMyQXJyYXknICAgICAgIDogMSwKCSdVaW50OENsYW1wZWRBcnJheScgOiAxLAoKCS8qCgl0aGVzZSBwcm9wZXJ0aWVzIGFsbG93IEZGIHRvIGZ1bmN0aW9uLiB3aXRob3V0IHRoZW0sIGEgZnVja2Zlc3Qgb2YKCWluZXhwbGljYWJsZSBlcnJvcnMgZW51c2VzLiB0b29rIG1lIGFib3V0IDQgaG91cnMgdG8gdHJhY2sgdGhlc2UgZnVja2VycwoJZG93bi4KCWZ1Y2sgaGVsbCBpdCBpc24ndCBmdXR1cmUtcHJvb2YsIGJ1dCB0aGUgZXJyb3JzIHRocm93biBhcmUgdW5jYXRjaGFibGUKCWFuZCB1bnRyYWNhYmxlLiBzbyBhIGhlYWRzLXVwLiBlbmpveSwgZnV0dXJlLW1lIQoJKi8KCSdET01FeGNlcHRpb24nIDogMSwKCSdFdmVudCcgICAgICAgIDogMSwKCSdNZXNzYWdlRXZlbnQnIDogMQp9OwoKWyBnbG9iYWwsIGdsb2JhbC5fX3Byb3RvX18gXS5mb3JFYWNoKGZ1bmN0aW9uICggb2JqICkgewoJT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoIG9iaiApLmZvckVhY2goZnVuY3Rpb24oIHByb3AgKSB7CgkJaWYoICF3aGl0ZXkuaGFzT3duUHJvcGVydHkoIHByb3AgKSApIHsKCQkJZGVsZXRlIG9ialsgcHJvcCBdOwoJCX0KCX0pOwp9KTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eSggQXJyYXkucHJvdG90eXBlLCAnam9pbicsIHsKCXdyaXRhYmxlOiBmYWxzZSwKCWNvbmZpZ3VyYWJsZTogZmFsc2UsCgllbnVtcmFibGU6IGZhbHNlLAoKCXZhbHVlOiAoZnVuY3Rpb24gKCBvbGQgKSB7CgkJcmV0dXJuIGZ1bmN0aW9uICggYXJnICkgewoJCQlpZiAoIHRoaXMubGVuZ3RoID4gNTAwIHx8IChhcmcgJiYgYXJnLmxlbmd0aCA+IDUwMCkgKSB7CgkJCQl0aHJvdyAnRXhjZXB0aW9uOiB0b28gbWFueSBpdGVtcyc7CgkJCX0KCgkJCXJldHVybiBvbGQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCX07Cgl9KCBBcnJheS5wcm90b3R5cGUuam9pbiApKQp9KTsKCi8qIHdlIGRlZmluZSBpdCBvdXRzaWRlIHNvIGl0J2xsIG5vdCBiZSBpbiBzdHJpY3QgbW9kZSAqLwpmdW5jdGlvbiBleGVjICggY29kZSApIHsKCXJldHVybiBldmFsKCAndW5kZWZpbmVkO1xuJyArIGNvZGUgKTsKfQp2YXIgY29uc29sZSA9IHsKCV9pdGVtcyA6IFtdLAoJbG9nIDogZnVuY3Rpb24oKSB7CgkJY29uc29sZS5faXRlbXMucHVzaC5hcHBseSggY29uc29sZS5faXRlbXMsIGFyZ3VtZW50cyApOwoJfQp9Owpjb25zb2xlLmVycm9yID0gY29uc29sZS5pbmZvID0gY29uc29sZS5kZWJ1ZyA9IGNvbnNvbGUubG9nOwp2YXIgcCA9IGNvbnNvbGUubG9nLmJpbmQoIGNvbnNvbGUgKTsKCihmdW5jdGlvbigpewoJInVzZSBzdHJpY3QiOwoKCWdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoIGV2ZW50ICkgewoJCXBvc3RNZXNzYWdlKHsKCQkJZXZlbnQgOiAnc3RhcnQnCgkJfSk7CgoJCXZhciBqc29uU3RyaW5naWZ5ID0gSlNPTi5zdHJpbmdpZnksIC8qYmFja3VwKi8KCQkJcmVzdWx0OwoKCQl0cnkgewoJCQlyZXN1bHQgPSBleGVjKCBldmVudC5kYXRhICk7CgkJfQoJCWNhdGNoICggZSApIHsKCQkJcmVzdWx0ID0gZS50b1N0cmluZygpOwoJCX0KCgkJLypKU09OIGRvZXMgbm90IGxpa2UgYW55IG9mIHRoZSBmb2xsb3dpbmcqLwoJCXZhciBzdHJ1bmcgPSB7CgkJCUZ1bmN0aW9uICA6IHRydWUsIEVycm9yICA6IHRydWUsCgkJCVVuZGVmaW5lZCA6IHRydWUsIFJlZ0V4cCA6IHRydWUKCQl9OwoJCXZhciBzaG91bGRfc3RyaW5nID0gZnVuY3Rpb24gKCB2YWx1ZSApIHsKCQkJdmFyIHR5cGUgPSAoIHt9ICkudG9TdHJpbmcuY2FsbCggdmFsdWUgKS5zbGljZSggOCwgLTEgKTsKCgkJCWlmICggdHlwZSBpbiBzdHJ1bmcgKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCQkvKm5laXRoZXIgZG9lcyBpdCBmZWVsIGNvbXBhc3Npb25hdGUgYWJvdXQgTmFOIG9yIEluZmluaXR5Ki8KCQkJcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSB8fCB2YWx1ZSA9PT0gSW5maW5pdHk7CgkJfTsKCgkJdmFyIHJldml2ZXIgPSBmdW5jdGlvbiAoIGtleSwgdmFsdWUgKSB7CgkJCXZhciBvdXRwdXQ7CgoJCQlpZiAoIHNob3VsZF9zdHJpbmcodmFsdWUpICkgewoJCQkJb3V0cHV0ID0gJycgKyB2YWx1ZTsKCQkJfQoJCQllbHNlIHsKCQkJCW91dHB1dCA9IHZhbHVlOwoJCQl9CgoJCQlyZXR1cm4gb3V0cHV0OwoJCX07CgoJCXBvc3RNZXNzYWdlKHsKCQkJYW5zd2VyIDoganNvblN0cmluZ2lmeSggcmVzdWx0LCByZXZpdmVyICksCgkJCWxvZyAgICA6IGpzb25TdHJpbmdpZnkoIGNvbnNvbGUuX2l0ZW1zLCByZXZpdmVyICkuc2xpY2UoIDEsIC0xICkKCQl9KTsKCX07Cn0pKCk7Cg=="),o=new Blob([n],{type:"application/javascript"}),r=window.URL.createObjectURL(o);return function(t){function n(){i=window.setTimeout(function(){o("Maximum execution time exceeded")},500)}function o(e){clearTimeout(i),a.terminate(),t.directreply(e)}var i,a=new Worker(r);a.onmessage=function(t){var r=t.data.event;"start"===r?n():o(e(t.data))},a.onerror=function(e){o(""+e)},a.postMessage(t.content.replace(/^>/,""))}}(),Object.merge=function(){return[].reduce.call(arguments,function(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},{})},Object.iterate=function(e,t,n){Object.keys(e).forEach(function(o){t.call(n,o,e[o],e)})},Object.TruthMap=function(e){function t(e,t){return e[t]=!0,e}return(e||[]).reduce(t,Object.create(null))},Object.defineProperty(Array.prototype,"invoke",{value:function(e){function t(t){var o=t;return t[e]&&t[e].apply&&(o=t[e].apply(t,n)),o}var n=[].slice.call(arguments,1);return this.map(t)},configurable:!0,writable:!0}),Object.defineProperty(Array.prototype,"first",{value:function(e){return this.some(function(t){return e.apply(null,arguments)&&((e=t)||!0)})?e:null},configurable:!0,writable:!0}),Object.defineProperty(Array.prototype,"random",{value:function(){return this[Math.floor(Math.random()*this.length)]},configurable:!0,writable:!0}),["forEach","map","filter","reduce"].forEach(function(e){var t=[][e];Array[e]=function(){return t.call.apply(t,arguments)}}),String.prototype.indexesOf=function(e,t){for(var n=(t||0)-1,o=[];(n=this.indexOf(e,n+1))>-1;)o.push(n);return o},String.prototype.supplant=function(e){function t(e,t){return n.hasOwnProperty(t)?n[t]:e}var n=Object(e)===e?e:arguments;return this.replace(/\{([^\}]+)\}/g,t)},String.prototype.startsWith=function(e){return 0===this.indexOf(e)},Function.prototype.throttle=function(e){var t=this,n=-1,o=function(){clearTimeout(n);var o=this,r=arguments;n=setTimeout(function(){t.apply(o,r)},e)};return o},Function.prototype.memoize=function(){var e=Object.create(null),t=this;return function(n){if(n in e)return e[n];var o=t.apply(null,arguments);return e[n]=o,o}},Function.prototype.memoizeAsync=function(e){var t=Object.create(null),n=this,e=e||function(e){return e};return function(){function o(){t[a]=arguments,i.apply(null,arguments)}var r=[].slice.call(arguments),i=r.pop(),a=e.apply(null,arguments);return a in t?(i.apply(null,t[a]),void 0):(r.push(o),n.apply(this,r),void 0)}},Number.prototype.maxDecimal=function(e){var t=Math.pow(10,e);return Math.floor(this*t)/t},Number.prototype.fallsAfter=function(e){e=e.slice();for(var t,n=e.shift(),o=this.valueOf(),r=0,i=e.length;i>r&&(t=e[r],!(t>o));r++)n=t;return o>=n?n:null},Math.ratio=function(e,t){e=Number(e),t=Number(t);var n=this.gcd(e,t);return e/n+":"+t/n},Math.gcd=function(e,t){return t?this.gcd(t,e%t):e},Math.rand=function(e,t){return e?t||(t=e,e=0):(e=0,t=9),Math.floor(Math.random()*(t-e+1))+e},Object.defineProperty(RegExp.prototype,"toJSON",{value:function(){return""+this},configurable:!0,writable:!0}),RegExp.escape=function(e){return e.replace(/[-^$\\\/\.*+?()[\]{}|]/g,"\\$&")},Date.timeSince=function(e,t){function n(e,t){return e=Math.floor(e),t+=1===e?"":"s",e+" "+t}t=t||new Date;for(var o,r=t-e,i=[{delta:31536e6,suffix:"year"},{delta:2592e6,suffix:"month"},{delta:864e5,suffix:"day"},{delta:36e5,suffix:"hour"},{delta:6e4,suffix:"minute"},{delta:1e3,suffix:"second"}];o=i.shift();)if(r>=o.delta)return n(r/o.delta,o.suffix);return n(r,"millisecond")},function(){var t;t=e!==void 0?e:"undefined"!=typeof exports?exports:window,t.parseCommandArgs=function(){var e=0,t=1,n=2,o=3,r="'",i='"',a={parse:function(t,n,o){this.source=t,this.pos=0,this.length=t.length,this.state=e,this.lookahead="",this.escaper=o||"~",this.separator=n||" ";var r=this.tokenize();return this.state!==e&&this.throwFinishError(),r},tokenize:function(){for(var e,t=[];this.length>this.pos;)e=this.nextArg(),e&&t.push(e);return t},nextArg:function(){var t,n="";for(this.state=e;;){if(t=this.nextChar(),null===t||this.state===o)break;n+=t}return n},nextChar:function(t){var n=this.lookahead=this.source[this.pos];return this.pos++,n?t?n:n===this.escaper?this.nextChar(!0):n===this.separator&&this.state===e?(this.state=o,n):this.string():null},string:function(){var e=this.lookahead;return e===r?this.singleQuotedString():e===i?this.doubleQuotedString():e},singleQuotedString:function(){return this.state===n?this.lookahead:(this.state=this.state!==t?t:e,this.nextChar())},doubleQuotedString:function(){return this.state===t?this.lookahead:(this.state=this.state!==n?n:e,this.nextChar())},throwFinishError:function(){var e="";this.state===t?e="Expected "+r:this.state===n&&(e="Expected "+i);var o=Error("Unexpected end of input: "+e);throw o.column=this.pos,o}};return function(){return a.parse.apply(a,arguments)}}()}();var n=function(){function e(){this.word=null,this.children={}}function t(n){if(!(this instanceof t))throw new TypeError("Illegal function call");if(n=Number(n),isNaN(n)||1>n)throw new TypeError("maxCost must be an integer > 1 ");this.maxCost=n,this.trie=new e}function n(e,t){var n,o,r,i=[];for(void 0===t?(r=0,o=e):(r=e,o=t-r),n=0;o>n;++n)i[n]=r++;return i}function o(e,t,o){var i=[],a=n(e.length+1);return Object.keys(o.children).forEach(function(n){r(o.children[n],n,e,a,i,t)}),i}function r(e,t,n,o,i,a){var s,c,u,m,l,p=n.length+1,h=[o[0]+1];for(s=1;p>s;++s)c=h[s-1]+1,u=o[s]+1,m=n.charAt(s-1)!==t?o[s-1]+1:o[s-1],h.push(Math.min(c,u,m));l=h[h.length-1],a>=l&&null!==e.word&&i.push([e.word,l]),a>=Math.min.apply(Math,h)&&Object.keys(e.children).forEach(function(t){r(e.children[t],t,n,h,i,a)})}return e.prototype.add=function(t){for(var n,o=this,r=0;n=t.charAt(r++);)n in o.children||(o.children[n]=new e),o=o.children[n];o.word=t},t.prototype={constructor:t,build:function(t){if(!Array.isArray(t))throw new TypeError("Cannot build a dictionary from "+t);this.trie=new e,t.forEach(function(e){this.trie.add(e)},this)},__sortfn:function(e,t){return e[1]-t[1]},search:function(e){e=e.valueOf();var t;if("string"!=typeof e)throw new TypeError("Cannot search "+e);if(void 0===this.trie)throw new TypeError("Cannot search, dictionary isn't built yet");return t=o(e,this.maxCost,this.trie),t.sort(this.__sortfn),t.map(function(e){return e[0]})}},t}();e.commandDictionary=new n(3),function(){var t={help:function(t){if(t&&t.length){var n=e.getCommand(t.toLowerCase());if(n.error)return n.error;var o=n.description||"No info is available";return t+": "+o}return"https://github.com/Zirak/SO-ChatBot/wiki/Interacting-with-the-bot"},listen:function(t){return e.callListeners(t)||e.giveUpMessage(t)},eval:function(t){return e.eval(t)},live:function(){return e.stopped?(e.continue(),"And on this day, you shall paint eggs for a giant bunny."):"I'm not dead! Honest!"},die:function(){return e.stopped?"Kill me once, shame on you, kill me twice...":(e.stop(),"You killed me!")},refresh:function(){window.location.reload()},forget:function(t){var n=t.toLowerCase(),o=e.getCommand(n);return o.error?o.error:o.canDel(t.get("user_id"))?(o.del(),"Command "+n+" forgotten."):"You are not authorized to delete the command "+t},ban:function(t){function n(n){var o,i=Number(n);isNaN(i)&&(i=t.findUserid(n.replace(/^@/,""))),0>i?o="Cannot find user {0}.":e.isOwner(i)?o="Cannot mindjail owner {0}.":e.banlist.contains(i)?o="User {0} already in mindjail.":(e.banlist.add(i),o="User {0} added to mindjail."),r.push(o.supplant(n))}function o(t){var n=e.users[t],o=n?n.name:"?";return"{0} ({1})".supplant(t,o)}var r=[];return t.content?t.parse().forEach(n):r=Object.keys(e.banlist).filter(Number).map(o),r.join(" ")||"Nothing to show/do."},unban:function(t){function n(n){var r,i=Number(n);isNaN(i)&&(i=t.findUserid(n.replace(/^@/,""))),0>i?r="Cannot find user {0}.":e.banlist.contains(i)?(e.banlist.remove(i),r="User {0} freed from mindjail!"):r="User {0} isn't in mindjail.",o.push(r.supplant(n))}var o=[];return t.parse().forEach(n),o.join(" ")},info:function(t){function n(t){var n=e.getCommand(t);if(n.error)return n.error;var o="Command {name}, created by {creator}".supplant(n);return n.date&&(o+=" on "+n.date.toUTCString()),o+=n.invoked?", invoked "+n.invoked+" times":" but hasn't been used yet"}function o(){var e="I awoke on {0} (that's about {1} ago)",t=i.start.toUTCString(),n=Date.timeSince(i.start);return e.supplant(t,n)}function r(){var e=[],t="";return i.invoked&&e.push("got invoked "+i.invoked+" times"),i.learned&&(t="but ",e.push("learned "+i.learned+" commands")),i.forgotten&&e.push(t+"forgotten "+i.forgotten+" commands"),.15>Math.random()&&e.push("teleported "+Math.rand(100)+" goats"),e.join(", ")||"haven't done anything yet!"}if(t.content)return n(t.content);var i=e.info;return o()+", "+r()},jquery:function n(t){var o=t.parse(!0);if(o.length>1)return o.map(n).join(" ");var r,i=t.trim().replace(/^\$/,"jQuery"),a=i.split("."),s=!1,c=i;return e.log(i,a,"/jquery input"),3===a.length&&(a=[a[2]]),"jQuery"===a[0]&&jQuery[a[1]]?s=!0:1===a.length&&jQuery.prototype[a[0]]?(c=a[0],s=!0):jQuery[a[0]]&&(c="jQuery."+a[0],s=!0),r=s?"http://api.jquery.com/"+c:"http://api.jquery.com/?s="+encodeURIComponent(t),e.log(r,"/jquery link"),r},choose:function(t){function n(e){return"or"!==e}var o=t.parse().filter(n),r=o.length;return e.log(o,"/choose input"),.05>Math.random()?2===r?"Neither":"None of the above":.05>Math.random()?2===r?"Both!":"All of the above":o[Math.floor(Math.random()*r)]},user:function(e){var t=e.parse(),n=t[0]||e.get("user_id"),o=n;return!/^\d+$/.test(n)&&(o=e.findUserid(n),0>o)?"Can't find user "+n+" in this chatroom.":(e.directreply("http://stackoverflow.com/users/"+o),void 0)},listcommands:function(t){var n=Object.keys(e.commands),o=/^(\d+|$)/.test(t.content),r=Number(t.content)||0,i=50,a=Math.ceil(Math.max(0,n.length)/i)-1;if(r>a||!o)return[t.codify("StackOverflow: Could not access page"),"This unicorn has killed itself because of you","Accordion to recent surveys, you suck"].random();var s=r*i,c=s+i,u=n.slice(s,c).join(", ");return u+" (page {0}/{1})".supplant(r,a)},purgecommands:function(t){function n(t){return e.commands[t]}function o(e){e.learned&&e.canDel(r)&&e.del()}var r=t.get("user_id");return Object.keys(e.commands).map(n).forEach(o),"The deed has been done."}};t.norris=function(e,t){function n(n){var o;o="success"!==n.type?"Chuck Norris is too awesome for this API. Try again.":IO.decodehtmlEntities(n.value.joke),t&&t.call?t(o):e.reply(o)}var o="http://api.icndb.com/jokes/random";IO.jsonp({url:o,fun:n,jsonpName:"callback"})},t.norris.async=!0,t.urban=function(){var e=Object.create(null);return function(t,n){function o(n){var o;o="no_results"===n.result_type?"No definition found for "+t:i(n.list[0]),e[t]=o,r(o)}function r(e){n&&n.call?n(e):t.reply(e)}function i(e){var n=e.definition.replace(/\[(\w+)\]/g,a);return t.link(e.word,e.permalink)+" "+n}function a(e,n){var o="http://urbandictionary.com/define.php?term="+encodeURIComponent(n);return t.link(e,o)}return t.length?e[t]?r(e[t]):(IO.jsonp({url:"http://api.urbandictionary.com/v0/define",data:{term:t.content},jsonpName:"callback",fun:o}),void 0):"Y U NO PROVIDE ARGUMENTS!?"}}(),t.urban.async=!0,t.parse=function(){var t={who:function(){return[].pop.call(arguments).get("user_name")},someone:function(){var e=document.getElementById("sidebar").getElementsByClassName("present-user"),t=[].filter.call(e,function(e){return Number(e.style.opacity)>=.5}),n=t[Math.floor(Math.random()*(t.length-1))];return n?n.getElementsByTagName("img")[0].title:"Nobody! I'm all alone :("},digit:function(){return Math.floor(10*Math.random())},encode:function(e){return encodeURIComponent(e)},rand:function(e,t){return e=Number(e),t=Number(t),Math.rand(e,t)}},n=/(?:.|^)\$(\w+)(?:\((.*?)\))?/g;return function o(r,i){function a(t,n,o){if(t.startsWith("$$"))return t.slice(1);var r="";"$"!==t[0]&&(r=t[0]);var i=c(n);return i?(e.log(i,n,o,"/parse replaceMacro"),r+=i.apply?i.apply(null,s(o)):i):n}function s(t){return e.log(t,"/parse parseMacroArgs"),t?o(t,i).split(",").invoke("trim").concat(r):[]}function c(n){function o(e){return e.hasOwnProperty(n)}var a=e.users[r.get("user_id")],s=[t,u,a,i].first(o);return(s||{})[n]}var u=r.get&&r.get()||{};return i=i||{},e.log(r,i,"/parse input"),r.replace(n,a)}}(),t.tell=function(){var t={tell:!0,forget:!0};return function(n){function o(e){e&&(c?l.directreply(e):l.reply(e))}var r=n.split(" ");e.log(n.valueOf(),r,"/tell input");var i,a=r[0],s=r[1];if(!a||!s)return"Invalid /tell arguments. Use /help for usage info";if(s=s.toLowerCase(),i=e.getCommand(s),i.error)return i.error;if(t.hasOwnProperty(s))return"Command "+s+" cannot be used in /tell.";if(!i.canUse(n.get("user_id")))return"You do not have permission to use command "+s;if(/^@/.test(a))return"Don't be annoying, drop the @, nobody likes a double-ping.";var c=!1,u={};/^:?\d+$/.test(a)?(u.message_id=a.replace(/^:/,""),c=!0):u.user_name=a;var m=Object.merge(n.get(),u),l=e.Message(r.slice(2).join(" "),m);e.log(l,"/tell calling "+s),i.async?i.exec(l,o):o(i.exec(l))}}(),t.mdn=function(t,n){function o(t){if(200!==t.responseStatus)return r("Something went on fire; status "+t.responseStatus),void 0;var n=t.responseData.results[0];e.log(n,"/mdn result"),r(n.url)}function r(e){n&&n.call?n(e):t.reply(e)}IO.jsonp.google(""+t+" site:developer.mozilla.org",o)},t.mdn.async=!0;var o={ban:"Bans user(s) from using me. Lacking arguments, prints the banlist. `/ban [usr_id|usr_name, [...]`",choose:'"Randomly" choose an option given. `/choose option0 option1 ...`',die:"Kills me :(",eval:"Forwards message to javascript code-eval",forget:"Forgets a given command. `/forget cmdName`",get:"Grabs a question/answer link (see online for thorough explanation)",help:"Fetches documentation for given command, or general help article. `/help [cmdName]`",info:"Grabs some stats on my current instance or a command. `/info [cmdName]`",jquery:"Fetches documentation link from jQuery API. `/jquery what`",listcommands:"Lists commands. `/listcommands [page=0]`",listen:"Forwards the message to my ears (as if called without the /)",live:"Resurrects me (:D) if I'm down",mdn:"Fetches mdn documentation. `/mdn what`",norris:"Random chuck norris joke!",parse:'Returns result of "parsing" message according to the my mini-macro capabilities (see online docs)',purgecommands:"Deletes all user-taught commands.",refresh:"Reloads the browser window I live in",regex:"Executes a regex against text input. `/regex text regex [flags]`",tell:"Redirect command result to user/message. /tell `msg_id|usr_name cmdName [cmdArgs]`",unban:"Removes a user from my mindjail. `/unban usr_id|usr_name`",urban:"Fetches UrbanDictionary definition. `/urban something`",user:"Fetches user-link for specified user. `/user usr_id|usr_name`"},r={die:!0,live:!0,ban:!0,unban:!0,refresh:!0,purgecommands:!0},i={die:!0,ban:!0};Object.iterate(t,function(n,a){var s={name:n,fun:a,permissions:{del:"NONE",use:r[n]?"OWNER":"ALL"},description:o[n],async:t[n].async};i[n]&&(s=e.CommunityCommand(s)),e.addCommand(s)})}(),function(){e.listen(/^help(?: (\S+))?/,function(t){return e.getCommand("help").exec(t.matches[1])});var t=["A robot may not injure a human being or, through inaction, allow a human being to come to harm.","A robot must obey the orders given to it by human beings, except where such orders would conflict with the First Law.","A robot must protect its own existence as long as such protection does not conflict with the First or Second Laws."].map(function(e,t){return t+". "+e}).join("\n");e.listen(/^tell (me (your|the) )?(rule|law)s/,function(){return t}),e.listen(/^give (.+?) a lick/,function(e){var t,n=e.matches[1];return"me"===n?(n="you",t=""):"yourself"===n?(n="I",t=""):t="s","Mmmm! "+n+" taste"+t+" just like raisin"});var n=[/^what(?:'s|'re)?\s(?:(?:is|are)\s)?(?:(?:an|a)\s)?([\w\s\-]+)\??/,/^define\s(?:(?:an|a)\s)?([\w\s\-]+)/];e.listen(n,function(t){var n=t.matches[1],o=e.getCommand("define");o.exec(n,function(e){e=e.replace(n+":",""),t.reply(e)})})}()}(),function(){"use strict";var e="[{text}]({url})";bot.adapter={roomid:null,fkey:null,site:null,init:function(){var e=document.getElementById("fkey");return e?(this.fkey=e.value,this.roomid=/\d+/.exec(location)[0],this.site=/chat\.(\w+)/.exec(location)[1],this.in.init(),this.out.init(),void 0):(console.error("bot.adapter could not find fkey; aborting"),void 0)},transform:function(e){return e},escape:function(e){return e.replace(/([`\*_\(\)\[\]])/g,"\\$1")},reply:function(e){return"@"+e.replace(/\s/g,"")},directreply:function(e){return":"+e},codify:function(e){var t="    ",n=e.replace("	",t),o=n.split(/[\r\n]/g);return 1===o.length?"`"+o[0]+"`":o.map(function(e){return t+e}).join("\n")},link:function(t,n){return e.supplant({text:this.escape(t),url:n})}};var t=bot.adapter.in={times:{},lastTimes:{},firstPoll:!0,interval:5e3,init:function(){function e(e){e=JSON.parse(e),bot.log(e),t.openSocket(e.url)}var t=this,n=bot.adapter.roomid;IO.xhr({url:"/ws-auth",data:fkey({roomid:n}),method:"POST",complete:e})},openSocket:function(e){var t=this.socket=new WebSocket(e+"?l=99999999999");t.onmessage=this.ondata.bind(this),t.onclose=this.socketFail.bind(this)},ondata:function(e){this.pollComplete(e.data)},poll:function(){if(this.firstPoll)return this.initialPoll(),void 0;var e=this;IO.xhr({url:"/events",data:fkey(e.times),method:"POST",complete:e.pollComplete,thisArg:e})},initialPoll:function(){function e(e){e=JSON.parse(e),bot.log(e),n.times["r"+t]=e.time,n.firstPoll=!1,n.loopage()}bot.log("adapter: initial poll");var t=bot.adapter.roomid,n=this;IO.xhr({url:"/chats/"+t+"/events/",data:fkey({since:0,mode:"Messages",msgCount:0}),method:"POST",complete:e})},pollComplete:function(e){return e?(e=JSON.parse(e),Object.iterate(e,function(e,t){t.t&&(this.times[e]=t.t),t.e&&t.e.forEach(this.handleMessageObject,this)},this),IO.in.flush(),this.loopage(),void 0):(this.loopage(),void 0)},handleMessageObject:function(e){var t=e.event_type;if(3===t||4===t)return this.handleUserEvent(e),void 0;if(1===t||2===t)return this.lastTimes[e.room_id]=Date.now(),e.content.startsWith("<div class='full'>")?(this.handleMultilineMessage(e),void 0):(IO.in.receive(e),void 0)},handleMultilineMessage:function(e){var t=e.content.slice(0,e.content.lastIndexOf("</div>")).replace("<div class='full'>","");t.split("<br>").forEach(function(t){this.handleMessageObject(Object.merge(e,{content:t.trim()}))},this)},handleUserEvent:function(e){var t=e.event_type;3===t?IO.fire("userjoin",e):4===t&&IO.fire("userleave",e)},socketFail:function(){bot.log("adapter: socket failed",this),this.socket.close(),this.socket=null,this.loopage()},loopage:function(){if(!this.socket){var e=this;setTimeout(function(){e.poll()},this.interval)}}},n=bot.adapter.out={interval:t.interval+500,messages:{},init:function(){this.loopage()},add:function(e,t){t=t||bot.adapter.roomid,IO.out.receive({text:e+"\n",room:t})},build:function(e){this.messages[e.room]||(this.messages[e.room]=""),this.messages[e.room]+=e.text},send:function(){bot.stopped||Object.iterate(this.messages,function(e,t){t&&this.sendToRoom(t,e)},this),this.messages={}},sendToRoom:function(e,t){function o(o,r){bot.log(r.status),409===r.status?n.add(e,t):500===r.status?n.add("Server error (status 500) occured  (message probably too long)",t):200!==r.status?(console.error(r),n.add("Error "+r.status+" occured, I will call the maid "+" (@Zirak)")):IO.fire("sendoutput",r,e,t)}IO.xhr({url:"/chats/"+t+"/messages/new",data:{text:e,fkey:fkey().fkey},method:"POST",complete:o})},loopage:function(){var e=this;setTimeout(function(){IO.out.flush(),e.loopage()},this.interval)}};IO.register("output",n.build,n),IO.register("afteroutput",n.send,n),bot.adapter.init()}(),function(){"use strict";function e(){window.users&&(bot.users=Object.merge(bot.users,window.users))}bot.users={};var t={},n=function(e){var n=e.room_id;t[n]||(t[n]=[]),t[n].push(e.user_id),o()};IO.register("userjoin",function(e){bot.log(e,"userjoin"),bot.users[e.user_id]||n(e)});var o=function(){function e(e,n){function o(e){e=JSON.parse(e),e.users.forEach(r),t={}}function r(t){bot.users[t.id]=t,IO.fire("userregister",t,e)}n.length&&IO.xhr({method:"POST",url:"/user/info",data:{ids:n.join(),roomId:e},complete:o})}bot.log(t,"user addInfos"),Object.iterate(t,e)}.throttle(5e3);e()}(),bot.personality={bitchiness:0,thanks:{0:["You kiss-ass"],.5:["Thank you for noticing","teehee"],1:["Took you long enough","My pleasure","Don't mention it"]},apologies:{0:["What for?"],.5:["It was nothing...","No worries"],1:["You're forgiven. For now. Don't push it."]},stuff:{0:["Life is just *perfect*","What's there to bitch about, as long as I have *you*..."],1:["Oh don't mind me, that isn't difficult at all..."],1.2:["You don't appreciate me enough. Not that I need to be thanked.."],1.3:['The occasional "thanks" or "I\'m sorry" would be nice...'],2:["*sigh* Remember laughter? I don't. You ripped it out of me. Heartless bastard."]},insanity:{},okayCommands:{hangman:!0,help:!0},check:function(e){return!this.okayCommands.hasOwnProperty(e)},bitch:function(){return this.getResp(this.stuff)},command:function(){this.bitchiness+=this.getDB()},thank:function(){return this.unbitch(this.thanks)},apologize:function(){return this.unbitch(this.apologies)},unbitch:function(e,t){var n=this.getResp(e);return this.bitchiness-=t||this.bitchiness,n},getResp:function(e){return e[this.bitchiness.fallsAfter(Object.keys(e).map(Number).sort())].random()},isABitch:function(){return this.bitchiness>=1},looksLikeABitch:function(){return!1},getDB:function(){return this.isThatTimeOfTheMonth()?.075:.025},isThatTimeOfTheMonth:function(){var e=(new Date).getDate();return 2>e||e>27}},bot.listen(/thank(s| you)/,bot.personality.thank,bot.personality),bot.listen(/sorry/,bot.personality.apologize,bot.personality),bot.listen(/bitch/,bot.personality.bitch,bot.personality),IO.register("input",function(e){var t,n=e.content.toUpperCase();/(^)?STOP[\.!\?]?$/.test(n)?t="HAMMERTIME!":/(^)?STAHP[\.!\?]?$/.test(n)?t="HAMMAHTIME!":/(^)?HALT[\.!\?]?$/.test(n)?t="HAMMERZEIT!":/(^)?STOY[\.!\?]?$/.test(n)?t="ZABIVAT' VREMYA!":/(^)?CAESUM[\.!\?]?$/.test(n)&&(t="MALLEUS TEMPUS!"),t&&bot.adapter.out.add(t,e.room_id)}),function(){"use strict";var e=function(e){return e.split(" ").map(function(e){return 1>=e.length?e:2==e.length?e[0]:/:.*(.)/.test(e)?e.replace(/:.*(.)/,"$1"):e.split("").map(function(e,t){return 0!=t&&("a"==e||"e"==e||"o"==e||"u"==e||"i"==e||1!=t%2&&.15>Math.random())?"":e}).join("")}).join(" ")};bot.addCommand({name:"awsm",fun:e,permissions:{del:"NONE"},description:"tks a sntnc and trns i awsm"})}(),function(){function e(e){function o(t){t?(bot.log(t,"/beautify beautifying"),e.send(e.codify(a[c](t)))):(bot.log("/beautify not found"),e.reply(i.supplant(u)))}var r=e.parse(),s=r.shift(),c=(r.shift()||"js").toLowerCase();if(bot.log(s,c,"/beautify input"),!a.hasOwnProperty(c))return"Unrecognized language {0}. Options: {1}".supplant(c,Object.keys(a).join(", "));var u=Number(n(s,e));return 0>u?i.supplant(u):(t(u,o),void 0)}function t(e,t){function n(e){e="\r"===e[0]?null:IO.decodehtmlEntities(e),t(e)}IO.xhr({method:"GET",url:"/message/"+e,data:{plain:!0},complete:n})}function n(e,t){if(/^\d+$/.test(e))return e;bot.log(e,"/beautify fetch_message_id");var n=o(t.findUserid(e));return n?/\d+/.exec(n.id)[0]:-1}function o(e){function t(e){return/\bmonologue\b/.test(e.className)}var n=[].filter.call(document.getElementsByClassName("user-"+e),t).pop();return n?[].pop.call(n.getElementsByClassName("message")):void 0}var r="Fetches and beautifies a message containing html, css or js. `/beautify msgid [lang=js]`",i="Message {0} not found",a={js:js_beautify,css:css_beautify,html:style_html};bot.addCommand({name:"beautify",fun:e,permission:{del:"NONE"},description:r})}(),"undefined"!=typeof exports&&(exports.js_beautify=js_beautify),"undefined"!=typeof exports&&(exports.css_beautify=css_beautify),function(){"use strict";function e(){function e(e){bot.log("triggered bored on room #"+e),o[e]=s+1e4,r[e]=0;var t;do t=n.random();while(a.contains(t));a.add(t),bot.adapter.out.add(t,e)}function t(e){if(i.shortestConvo+1>r[e])return!1;var t=c[e];return t>(o[e]||0)&&s>=t+i.delay}var s=Date.now(),c=bot.adapter.in.lastTimes||{};Object.keys(c).filter(t).forEach(e)}function t(e){var t=r[e.room_id]||0;r[e.room_id]=t+1}var n;n=["jQuery is a better language than javascript","World hunger will be solved by eating cats","php is good","php is bad",'OOP stands for "Oh Oh! Poop!"',"Functional programming is the best","Ruby is for smelly hipsters","Python is for people with guttheria","Lisp is for lusers","Recursion is always the answer","Javascript isn't a real language","CoffeeScript is good","CoffeeScript sucks","You should comment all your code","You should use comments sparingly","Tabs are better than spaces","Spaces are better than tabs","Dart is a good language and idea","TypeScript will outdate javascript","Optimization is king","Premature optimization is the root of all evil","Perl is written in base64","ROT13 is sufficient encryption","Braces should only appear on the right `if () {`, not on the left","Braces should only appear on the left `if ()\\n{`, not on the right","Duck-Typing is best typing","Strong typing ftw","Static typing will prevent most bugs","Dynamic typing brings 70% more happiness units","NetTuts+ is a GREAT SITE!","expertsexchange is better than StackOverflow","WordPress is bread & butter for any decent website","Can anyone help me with a Java question?","Can I ask you guys a question?","http://stackoverflow.com/a/778275/617762","http://stackoverflow.com/users/22656/jon-skeet","I really hate it when people don't","Accordion to recent surveys, you may insert random instrument names into sentences without people noticing","There once was a girl fron Nantucket...","There once was a girl from Nantucket,\nWho had a nice fancy bucket.\nShe mopped up the floor\nAnd went to the door\nTo answer it.","We all know Linux is great...it does infinite loops in 5 seconds. ~ Linus Torvalds","Everything should be made as simple as possible, but not simpler. ~ Albert Einstein","If A = B and B = C, then A = C, except where void or prohibited by law. ~ Roy Santoro","Has anyone really been far even as decided to use even go want to do look more like?","    Math.sign = function (x) {\n        return (x > 0) - (x < 0);\n    }","Why can't Elvis Presley drive in reverse? Because he's dead","I like my women how I like my coffee. Without a penis",'A horse walks into a bar. The bartender asks, "Why the long face?" The horse, incapable of understanding English, shits on the floor  and leaves','The magic words which\'ll open many doors are "Push" and "Pull"',"Peggy had many valentine cards while I only had one. Peggy is a whore","Why did the boy drop his ice-cream? He was hit by a bus","What's sad about 4 black people driving off a cliff? They were my friends","Why can't T-Rexs clap? Because they're dead","Yo mamma's so fat, your father no longer finds her attractive so now they're getting divorced","An Irishman, a homosexual and a Jew walk into a bar. What a fine example of an integrated community","What's worse than biting on an apple and finding a worm? The holocaust","*knock knock* Who's there? \"Jehova's witnesses\"","How do you make a plumber cry? Kill his family","What did the farmer say when he couldn't find his tractor?\n\"Where's my tractor?\"","@jAndy, THE GAME!","You should always put at the start of your HTML files a comment for browsers that don't handle HTML","Java and JavaScript are similar like and Script are similar","Ruby is short for rubbish","Premature ejaculation is the root of all evil","Prototypal OOP should be popularized just for its acronym","The only good reason to use ctrl-C ctrl-V while programing is that your keyboard misses some greek letters","If you need your IDE's refactoring features, then your code isn't orthogonal","If you need your IDE's code generation tool, then your language is too verbose","The good thing in being a young programmer is that you can blame others for the bugs","There's always a better solution than a regular expression but the regex one will make you look smarter","Any programer should learn regular expressions as it brings easy reputation on Stack Overflow","A function that can't fit my screen can't not be bugged","Exception is a great feature when you want to keep bugs for another day","Don't mark variables private, just shoot trespassers in the head","What's the difference between EcmaScript and CoffeeScript ?","Many noobs confuse JSON and js objects. For exemple John Resig called getJSON a function returning a plain javascript object.",'"use strict" is for sissies',"How do you make a plumber cry ? And why ?","There are two ways of constructing a software design: One way is to make it so simple that there are obviously no deficiencies and the other way is to make it so complicated that there are no obvious deficiencies. [C.A.R. Hoare]","The cheapest, fastest, and most reliable components are those that aren’t there. [Gordon Bell]","Deleted code is debugged code. [Jeff Sickel]","Beauty is more important in computing than anywhere else in technology because software is so complicated. Beauty is the ultimate defence against complexity. [David Gelernter]","Simplicity is prerequisite for reliability. [Edsger W. Dijkstra]","PHP is a minor evil perpetrated and created by incompetent amateurs, whereas Perl is a great and insidious evil perpetrated by skilled but perverted professionals","The only places for icons is in a church, a burning church at that. [mhat]","Measuring programming progress by lines of code is like measuring aircraft building progress by weight. [Bill Gates]","The object-oriented model makes it easy to build up programs by accretion. What this often means, in practice, is that it provides a structured way to write spaghetti code. [Paul Graham]","Most software today is very much like an Egyptian pyramid with millions of bricks piled on top of each other, with no structural integrity, but just done by brute force and thousands of slaves. [Alan Kay]","A language that doesn’t have everything is actually easier to program in than some that do. [Dennis M. Ritchie]","Mostly, when you see programmers, they aren’t doing anything. One of the attractive things about programmers is that you cannot tell whether or not they are working simply by looking at them. Very often they’re sitting there seemingly drinking coffee and gossiping, or just staring into space. What the programmer is trying to do is get a handle on all the individual and unrelated ideas that are scampering around in his head. [Charles M. Strauss]","You can’t trust code that you did not totally create yourself. [Ken Thompson]","Object-oriented design is the roman numerals of computing. [Rob Pike]","If you want to go somewhere, goto is the best way to get there. [ken]","Simplicity is the ultimate sophistication. [Leonardo da Vinci]","Every language has an optimization operator. In C++ that operator is ‘//’","“Should array indices start at 0 or 1? My compromise of 0.5 was rejected without, I thought, proper consideration. ” - Stan Kelly-Bootle","“ Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live. ” - Rick Osborne","“ Any fool can write code that a computer can understand. Good programmers write code that humans can understand. ” - Martin Fowler","“ Beware of bugs in the above code; I have only proved it correct, not tried it. ” - Donald Knuth","If we’d asked the customers what they wanted, they would have said “faster horses” — Henry Ford","I (…) am rarely happier than when spending an entire day programming my computer to perform automatically a task that would otherwise take me a good ten seconds to do by hand.  Douglas Adams, Last Chance to See","I will, in fact, claim that the difference between a bad programmer and a good one is whether he considers his code or his data structures more important. Bad programmers worry about the code. Good programmers worry about data structures and their relationships.  — Linus Torvalds","Some problems are so complex that you have to be highly intelligent and well informed just to be undecided about them. — Laurence J. Peter","Any intelligent fool can make things bigger, more complex, and more violent. It takes a touch of genius — and a lot of courage — to move in the opposite direction. — Albert Einstein","Software obeys the law of gaseous expansion – it continues to grow until memory is completely filled. — Larry Gleason","An organisation that treats its programmers as morons will soon have programmers that are willing and able to act like morons only. — Bjarne Stroustrup","I have always wished that my computer would be as easy to use as my telephone. My wish has come true. I no longer know how to use my telephone. — Bjarne Stroustrup","As soon as we started programming, we found to our surprise that it wasn’t as easy to get programs right as we had thought. Debugging had to be discovered. I can remember the exact instant when I realized that a large part of my life from then on was going to be spent in finding mistakes in my own programs.  — Maurice Wilkes discovers debugging, 1949","Software gets slower faster than hardware gets faster. — Wirth’s law","OOP is to writing a program, what going through airport security is to flying. — Richard Mansfield","The problem with object-oriented languages is they’ve got all this implicit environment that they carry around with them. You wanted a banana but what you got was a gorilla holding the banana and the entire jungle. — Joe Armstrong","IDE features are language smells. — Reg Braithwaite","When there is no type hierarchy you don’t have to manage the type hierarchy. — Rob Pike","Languages that try to disallow idiocy become themselves idiotic. — Rob Pike","Premature optimization, that’s like a fart. Premature abstraction is like taking a dump on another developer’s desk.  Chris Eric","Benchmarks don’t lie, but liars do benchmarks.","Can fat people go skinny dipping?","If quizzes are quizzical then why are tests not testical?","Can you be a closet claustrophobic?","What are Preparation A through Preparation G?","Is a metaphor like a simile?","How do you remove a club soda stain?","If practice makes perfect, and no one is perfect, why bother practice?",'Why does the arcade game "Donkey Kong" have a monkey? Why isn\'t it called Monkey Kong?',"If a rabbit's foot was actually lucky, wouldn't it still be attached to the rabbit's leg?","If a chicken had lips, could it whistle?","How much wind could a windbreaker break if a windbreaker could break wind?","Does expecting the unexpected make the unexpected expected?","If you had three quarters, four dimes and four pennies in your pocket you would have $1.19. You would also have the largest number (11) and combination of coins possible without being able to provide change for a dollar.","Where in the nursery rhyme does it say Humpty Dumpty is an egg?","How do vampires have such well-kept hair if they can't see themselves in the mirror?"],function(){function e(e){for(var t=e.num,o={get:function(){return"http://xkcd.com/"+Math.rand(1,t)
},configurable:!0,enumerable:!0},r={},i=0;3>i;i++)r[n.length+i]=o;Object.defineProperties(n,r)}IO.jsonp({url:"http://dynamic.xkcd.com/api-0/jsonp/comic",jsonpName:"callback",fun:e})}(),function(){function e(e){IO.jsonp({url:"http://api.stackexchange.com/2.1/questions",jsonpName:"callback",data:{order:"desc",sort:"hot",tagged:"javascript",filter:"!BGS1(RNaQDIyAm(R7hhoosE8U0HdKY",site:"stackoverflow"},fun:e})}function t(e){function t(e){return e.score>=1}if(e.errorMessage)return console.error(e.errorMessage),void 0;var i=e.items.filter(t);if(o.actual.push.apply(o.actual,i),r){for(var a={get:o.fetch.bind(o),configurable:!0,enumerable:!0},s={},c=0;5>c;c++)s[n.length+c]=a;Object.defineProperties(n,s),r=!1}}var o={actual:[],fetch:function(){var n=Math.floor(Math.random()*this.actual.length);return 2>=this.actual.length&&e(t),this.actual.splice(n,1)[0].link}},r=!0;e(t)}();var o={},r={},i={delay:3e5,shortestConvo:10,memorySize:n.length/2},a=IO.CBuffer(i.memorySize);IO.register("heartbeat",e),IO.register("input",t)}(),function(){"use strict";function e(e){var t=e.toUpperCase();return r.hasOwnProperty(t)?r[t]:a.hasOwnProperty(e)?a[e]:e}function t(e,t,n){bot.log(e,t,"/convert unit broken"),i[t]?n(i[t](e)):n({error:"Confuse converter with "+t+", receive error message"})}function n(){return Object.keys(i)}var o,r,i={C:function(e){return{F:1.8*e+32,K:e+273.15}},F:function(e){return{C:(e-32)/1.8,K:5*(e+459.67)/9}},K:function(e){return 0>e?null:{C:e-273.15,F:1.8*e-459.67}},m:function(e){return{f:3.280839895*e}},f:function(e){return{m:e/3.28083989}},km:function(e){return i.m(1e3*e)},cm:function(e){return i.m(e/100)},mm:function(e){return i.m(e/1e3)},i:function(e){return i.f(e/12)},d:function(e){return{r:e*Math.PI/180}},r:function(e){return{d:180*e/Math.PI}},g:function(e){return{lb:.0022*e,st:157473e-9*e}},lb:function(e){return{g:453.592*e,st:.0714286*e}},st:function(e){return{g:6350.29*e,lb:14*e}},kg:function(e){return i.g(1e3*e)}},a={lbs:"lb",ft:"f",foot:"f",metres:"m",millimetres:"mm",killometres:"km",degrees:"d",radians:"r",grams:"g",kilograms:"kg",inches:"i",stones:"st"};o=Object.TruthMap(["AED","ANG","ARS","AUD","BDT","BGN","BHD","BND","BOB","BRL","BWP","CAD","CHF","CLP","CNY","COP","CRC","CZK","DKK","DOP","DZD","EEK","EGP","EUR","FJD","GBP","HKD","HNL","HRK","HUF","IDR","ILS","INR","JMD","JOD","JPY","KES","KRW","KWD","KYD","KZT","LBP","LKR","LTL","LVL","MAD","MDL","MKD","MUR","MVR","MXN","MYR","NAD","NGN","NIO","NIS","NOK","NPR","NZD","OMR","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","SAR","SCR","SEK","SGD","SKK","SLL","SVC","THB","TND","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","XOF","YER","ZAR","ZMK"]),r={"€":"EUR","£":"GBP","₤":"GBP","₨":"INR","₹":"INR","¥":"JPY","￥":"JPY","₪":"ILS",$:"USD"};var s=/(-?\d+\.?\d*)\s*(\S+)(\s+(?:(?:to|in)\s+)?(\S+))?$/,c=function(r,i){function a(e){bot.log(e,"/convert answer");var t;t=e.error?e.error:c(e),i&&i.call?i(t):r.reply(t)}function c(e){function t(e){return!h||h===e}function n(t){return e[t].maxDecimal(4)+t}var o=Object.keys(e);return o.length?o.filter(t).map(n).join(", "):"Could not convert {0} to {1}".supplant(p,h)}if("list"==""+r)return a(n().join(", ")),void 0;var m=s.exec(r);if(!m)return a({error:"Unidentified format; please see `/help convert`"}),void 0;var l=Number(m[1]),p=m[2],h=m[4]||"",d=!1;bot.log(l,p,h,"/convert input"),p=e(p),h=e(h),o[p.toUpperCase()]&&(d=!0),d?u.convert(l,p,h,a):t(l,p,a)},u={ratesCache:{},convert:function(e,t,n,o){this.from=t,this.to=n,this.upFrom=t.toUpperCase(),this.upTo=n.toUpperCase();var r=this.errorMessage();return r?(o({error:r}),void 0):(bot.log(e,t,n,"/convert money broken"),this.getRate(function(t){var r={};r[n]=e*t,o(r)}),void 0)},getRate:function(e){function t(t){n=t.rate,o.updateCache(n),e(n)}var n,o=this;return(n=this.checkCache())?(e(n),void 0):(IO.jsonp({url:"http://rate-exchange.appspot.com/currency",jsonpName:"callback",data:{from:o.from,to:o.to},fun:t}),void 0)},updateCache:function(e){this.ratesCache[this.upFrom]=this.ratesCache[this.upFrom]||{},this.ratesCache[this.upFrom][this.upTo]={rate:e,time:Date.now()}},checkCache:function(){var e,t=Date.now(),n=this.ratesCache[this.upFrom]&&(e=this.ratesCache[this.upFrom][this.upTo])&&18e6>=e.time-t;return console.log(this.ratesCache,n),n?e.rate:!1},errorMessage:function(){return this.to?o[this.upTo]?void 0:this.to+" aint no currency I ever heard of":"What do you want to convert "+this.from+" to?"}};bot.addCommand({name:"convert",fun:c,permissions:{del:"NONE"},description:"Converts several units and currencies, case sensitive. `/convert <num><unit> [to|in <unit>]` Pass in list for supported units `/convert list`",async:!0})}();var cowsay=function(){"use strict";function e(e,t){function n(e,n){var r=n.length;return o+r>t&&(e+="\n",o=0),o+=r+1,e+n+" "}var o=0;return e.split(" ").reduce(n,"")}function t(e,t,n){return n=n||" ",(e+Array(t).join(n)).slice(0,t)}var n={defaults:{e:"oo",T:"  ",t:!1,W:40},cow:["","        L   ^__^","         L  (e)\\_______","            (__)\\       )\\/\\","             T ||----w |","                ||     ||"].join("\n"),moo:function(n,o){var r=this.defaults;return this.eyes=t(o.e||r.e,2).slice(0,2),this.tongue=t(o.T||r.T,2).slice(0,2),this.line=o.t?"O":"\\",this.thinking=o.t,this.message=e(n,o.W||r.W).trim(),this.makeBalloon()+this.makeCow()},makeCow:function(){return this.cow.replace(/e/g,this.eyes).replace(/T/g,this.tongue).replace(/L/g,this.line)},makeBalloon:function(){function e(e,n){var o;return o=0===n?a.slice(0,2):n===i-1?a.slice(2,4):a.slice(2),o[0]+" "+t(e,r)+" "+o[1]}function n(e,t){return t.length>e?t.length:e}var o=this.message.split("\n"),r=o.reduce(n,0),i=o.length,a=this.chooseBorders(i),s=o.map(e),c=Array(r+2);return s.unshift(" "+c.join("_")),s.push(" "+c.join("-")),s.join("\n")},chooseBorders:function(e){var t;return t=this.thinking?["(",")","(",")","(",")"]:1===e?["<",">"]:["/","\\","\\","/","|","|"]}};return n}();bot.listen(/cow(think|say)\s(?:([eT])=(.{0,2})\s)?(?:([eT])=(.{0,2})\s)?(.+)/,function(e){function t(e){for(var t={},n=0,o=e.length;o>n;n+=2)e[n]&&e[n+1]&&(t[e[n]]=e[n+1]);return t}var n=t(e.matches.slice(2,-1));n.t="think"===e.matches[1],bot.log(n,"cowsay opts");var o=cowsay.moo(e.matches.pop(),n);e.send(e.codify(o))}),function(){"use strict";function e(e,n){var o=[];return function(e){for(var t=e.firstElementChild;t;t=t.nextElementSibling){if(t===n)return;"LI"===t.tagName&&o.push(t)}}(e),t(o)}function t(e){function t(e){return e.firstChild.data}return[].map.call(e,t)}var n={command:function(e,t){function n(n,o){bot.log(n,"/define results");var r=n[0];r=r?bot.adapter.link(e,"http://en.wiktionary.org/wiki?curid="+o)+" "+r:"No definition found",t&&t.call?t(r):e.reply(r)}bot.log(e,"/define input"),this.fetchData(e,n)},handleResponse:function(t,n){var o=t.query,r=o.pageids[0],i=o.pages[r].extract;if("-1"===r)return n([],-1),void 0;var a=document.createElement("body");a.innerHTML=i,n(e(a.getElementsByTagName("ol")[0]),r)},fetchData:function(e,t){var n=this;IO.jsonp({url:"http://en.wiktionary.org/w/api.php",jsonpName:"callback",data:{action:"query",titles:""+e,format:"json",prop:"extracts",indexpageids:!0},fun:function(e){n.handleResponse(e,t)}})}};bot.addCommand({name:"define",fun:n.command,thisArg:n,permissions:{del:"NONE"},description:"Fetches definition for a given word. `/define something`",async:!0})}(),bot.listen(/(which |what |give me a )?firefly( episode)?/i,function(e){var t=["Serenity","The Train Job","Bushwhacked","Shindig","Safe","Our Mrs. Reynolds","Jaynestown","Out of Gas","Ariel","War Stories","Trash","The Message","Heart of Gold","Objects in Space"];if(-1===e.indexOf("episode")&&.05>Math.random())return"Serenity (movie)";var n=Math.floor(14*Math.random());return"Episode {0} - {1}".supplant(n+1,t[n])}),function(){function e(e,o){function r(t){if(t.error_message)return e.reply(t.error_message),void 0;var r,a=[].concat(n[u](t.items));bot.log(a.slice(),"/get parseResponse parsing"),r=a.length?i(a):"User did not submit any "+c,bot.log(r,"/get parseResponse parsed"),o&&o.call?o(r):e.directreply(r)}function i(e){return e.map(function(e){return e.link}).join(" ; ")}var a=e.parse(),s=a[0]||"answer",c=s+"s",u=a[1]||"last",m=a[2];if("between"===u&&(m=a[4]),m||isNaN(u)||(m=u,u="last"),m||(m=e.get("user_id")),bot.log(a,"get input"),!t.hasOwnProperty(s))return'Invalid "getter" name '+s;if(!n.hasOwnProperty(u))return"Invalid range specifier "+u;var l="http://api.stackexchange.com/2.1/users/"+m+"/"+c,p={site:bot.adapter.site,sort:"creation",filter:"!BGS1(RNaKd_71l)9SkX3zg.ifSRSSy"};bot.log(l,p,"/get building url"),"between"===u&&(p.fromdate=Date.parse(a[2]),p.todate=Date.parse(a[3]),bot.log(l,p,"/get building url between")),IO.jsonp({url:l,data:p,fun:r})}var t={answer:!0,question:!0},n={first:function(e){return e[e.length-1]},last:function(e){return e[0]},between:function(e){return e}};bot.addCommand({name:"get",fun:e,permissions:{del:"NONE"},async:!0})}(),function(){function e(e,n){function o(n){if(bot.log(n,"/google response"),200!==n.responseStatus)return s("My Google-Fu is on vacation; status "+n.responseStatus),void 0;var o=n.responseData.results.slice(0,3);return bot.log(o,"/google results"),o.length?(s(r(e.content,o)),void 0):(s(t.random()),void 0)}function r(e,t){return a(e)+" "+t.map(i).join(" ; ")}function i(t){var n=IO.decodehtmlEntities(t.titleNoFormatting);return e.link(n,t.url)}function a(t){return e.link("*","http://google.com/search?q="+encodeURIComponent(t))}function s(t){bot.log(t,"/google final"),n&&n.call?n(t):e.reply(t)}IO.jsonp.google(""+e+" -site:w3schools.com",o)}var t=["The Google contains no such knowledge","There are no search results. Run.","My Google Fu has failed."];bot.addCommand({name:"google",fun:e,permissions:{del:"NONE"},description:"Search Google. `/google query`",async:!0})}(),function(){"use strict";var e=function(e){function t(t){e(t.word.toLowerCase().trim())}IO.jsonp({url:"http://sleepy-bastion-8674.herokuapp.com/",jsonpName:"callback",fun:t})},t={dude:["  +---+","  |   |","  |  413","  |   2","  |  5 6","__+__"].join("\n"),parts:["","O","|","/","\\","/","\\"],word:"",revealed:"",guesses:[],guessNum:0,maxGuess:6,guessMade:!1,end:!0,msg:null,validGuessRegex:/^[\w\s]+$/,receiveMessage:function(e){if(this.msg=e,this.end)this.new(e);else if(e.content)return this.handleGuess(e)},"new":function(n){function o(e){bot.log(e+" /hang random"),t.word=e,r.revealed=Array(e.length+1).join("-"),r.guesses=[],r.guessNum=0,r.guessMade=!0,r.register(),r.receiveMessage(n)}var r=this;e(o)},handleGuess:function(e){var t=e.slice().toLowerCase();bot.log(t,"handleGuess");var n=this.checkGuess(t);if(n)return n;var o=this.word.indexesOf(t);return o.forEach(function(e){this.uncoverPart(t,e)},this),o.length||this.guessNum++,this.guesses.push(t),this.guessMade=!0,bot.log(t,"handleGuess handled"),this.loseCheck()?this.lose():this.winCheck()?this.win():void 0},checkGuess:function(e){return this.validGuessRegex.test(e)?this.guesses.indexOf(e)>-1?e+" was already submitted":e.length>this.word.length?bot.adapter.codify(e)+" is longer than the phrase":void 0:"Only alphanumeric and whitespace characters allowed"},uncoverPart:function(e,t){this.revealed=this.revealed.slice(0,t)+e+this.revealed.slice(t+e.length)},preparePrint:function(){var e=this,t=this.dude.replace(/\d/g,function(t){return t>e.guessNum?" ":e.parts[t]}),n=this.guesses.sort().join(", ")+"\n"+this.revealed,o=this.msg.codify(t+"\n"+n);bot.log(o,this.msg),this.msg.send(o)},win:function(){return this.unregister(),"Correct! The phrase is "+this.word+"."},lose:function(){return this.unregister(),"You people suck. The phrase was "+this.word},winCheck:function(){return this.word===this.revealed},loseCheck:function(){return this.guessNum>=this.maxGuess},register:function(){this.unregister(),IO.register("beforeoutput",this.buildOutput,this),this.end=!1},unregister:function(){IO.unregister("beforeoutput",this.buildOutput),this.end=!0},buildOutput:function(){this.guessMade&&(this.preparePrint(),this.guessMade=!1)}};bot.addCommand({name:"hang",fun:t.receiveMessage,thisArg:t})}(),function(){"use strict";function e(e,n){var o=[];return function r(e){for(var t=e.firstElementChild;t;t=t.nextElementSibling){if(t===n)return;var i=t.tagName;"UL"!==i?"LI"===i&&o.push(t):r(t)}}(e),t(o)}function t(e){function n(e,n){return n.children.length?e.push.apply(e,t(n.getElementsByTagName("li"))):e.push(n.firstChild.data),e}return[].reduce.call(e,n,[])}var n={command:function(e,t){function n(n){var o=n.random();t&&t.call?t(o):e.reply(o)}var o=this.extractParams(e);return o.error?o.error:(this.fetchData(o,n),void 0)},handleResponse:function(t,n,o){var r=t.query,i=r.pages[r.pageids[0]].extract,a=document.createElement("body");a.innerHTML=i;var s=a.getElementsByTagName("h2"),c=e(a,s[1]);o(this.filter(c,n))},extractParams:function(e){function t(){return{error:"That format confuses me! See `/help inhistory`"}}var n,o={};if(!e.length||"today"===e.toLowerCase())return n=new Date,o.month=n.getMonth()+1,o.day=n.getDate(),o;var r;if(r=/^\d{4}$/.exec(e))o.year=Number(r[0]);else{if(!(r=/^(?:(\d{4})(?:-|\/))?(\d{2})(?:-|\/)(\d{2})$/.exec(e)))return t();r[1]&&(o.year=Number(r[1])),o.month=Number(r[2]),o.day=Number(r[3])}return bot.log(o,"/inhistory extractParams"),this.paramsCheck(o)?o:t()},paramsCheck:function(e){var t=e[t],n=e[n],o=e[o];if(2===n&&o>29)return!1;var r=void 0===t||t>0,i=void 0===n||n>=1&&12>=n,a=void 0===o||o>=1&&31>=o;return r&&i&&a},filter:function(e,t){return t.year&&t.month?e.filter(function(e){var n=(/^\d+/.exec(e)||[])[0];return Number(n)===t.year}):e},fetchData:function(e,t){var n=[];n=e.year&&!e.month?[e.year]:[this.monthName(e.month),e.day];var o="http://en.wikipedia.org/w/api.php",r=this;IO.jsonp({url:o,jsonpName:"callback",data:{format:"json",action:"query",prop:"extracts",indexpageids:!0,titles:n.join(" ")},fun:function(n){r.handleResponse(n,e,t)}})},monthName:function(e){return["january","february","march","april","may","june","july","august","september","october","november","december"][e-1]}};bot.addCommand({name:"inhistory",fun:n.command,thisArg:n,permissions:{del:"NONE"},description:"Grabs a historical event from today's date or a date given in MM-DD format. `/inhistory [MM-DD]`",async:!0})}(),function(){"use strict";function e(e,o,r){e=e.toLowerCase();var i={"++":1,"--":-1}[o];if(bot.log(e,i,"vote"),e===r.user_name.toLowerCase()){if(n[r.user_id])return;bot.adapter.out.add(bot.adapter.reply(r.user_name)+" Don't be an idiot",r.room_id),n[r.user_id]=!0}else t[e]=(t[e]||0)+i,localStorage.bot_karma=JSON.stringify(t)}var t=JSON.parse(localStorage.bot_karma||'{"amberroxannareal":-1}'),n={};IO.register("input",function(t){var n,o=t.content;1===t.event_type&&(n=/(\S+)(\+\+|\-\-)/.exec(o))&&e(n[1],n[2],t)}),bot.addCommand({name:"karma",fun:function(e){var n=e.content,o=t[n.toLowerCase()];return n?"{0} has {1} karma".supplant(n,void 0===o?"no":o):"Unlike beauty, karma is not in the eye of the beholder"}})}(),function(){"use strict";function e(e){bot.log(e,"/learn input");var n=e.parse(),r={name:n[0],output:n[1],input:n[2]||".*",creator:e.get("user_name"),date:new Date};r.description=["User-taught command:",n[3]||"",e.codify(r.output)].join(" ");var a=o(r);return a?a:(r.name=r.name.toLowerCase(),r.input=RegExp(r.input),bot.log(r,"/learn parsed"),t(r),i(r),"Command "+r.name+" learned")}function t(e){var t=bot.Command({name:e.name,description:e.description,creator:e.creator,date:e.date,fun:n(e),permissions:{use:"ALL",del:"ALL"}});t.learned=!0,t.del=function(n){return function(){a(e.name),n.call(t)}}(t.del),bot.log(t,"/learn addCustomCommand"),bot.addCommand(t)}function n(e){return bot.log(e,"/learn makeCustomCommand"),function(t){bot.log(t,e.name+" input");var n=bot.Message(e.output,t.get());return s.exec(n,e.input.exec(t))}}function o(e){var t,n=Object.keys(e).some(function(t){return!e[t]});return n?t="Illegal /learn object; see `/help learn`":/^[\w\-$]+$/.test(e.name)?bot.commandExists(e.name.toLowerCase())&&(t="Command "+e.name+" already exists"):t="Invalid command name",t}function r(){function e(e,o){o=JSON.parse(o),o.input=n(o.input),o.date=new Date(Date.parse(o.date)),bot.log(o,"/learn loadCommands"),t(o)}function n(e){var t=(""+e).split("/");return RegExp(t.slice(1,-1).join("/"),t[t.length-1])}Object.iterate(c,e)}function i(e){c[e.name]=JSON.stringify(e),localStorage.bot_learn=JSON.stringify(c)}function a(e){delete c[e],localStorage.bot_learn=JSON.stringify(c)}var s=bot.getCommand("parse"),c=JSON.parse(localStorage.bot_learn||"{}");bot.addCommand({name:"learn",fun:e,privileges:{del:"NONE"},description:"Teaches me a command. `/learn cmdName outputPattern [inputRegex [description]]`"}),r()}(),function(){"use strict";function e(e){function n(t){bot.log(t,"/mustache finish"),e.directreply("http://mustachify.me/?src="+t)}var o=e.content;if(t(o))return n(encodeURIComponent(o)),void 0;if(o?/\D/.test(o)&&(o=e.findUserid(o)):o=e.get("user_id"),bot.log(o,"/mustache mapped"),0>o||!bot.users.hasOwnProperty(o))return"User {0} was not found.".supplant(o);var r=bot.users[o].email_hash;"!"===r[0]?n(encodeURIComponent(r.slice(1))):n("http%3A%2F%2Fwww.gravatar.com%2Favatar%2F{0}%3Fs%3D256%26d%3Didenticon#.png".supplant(r))}function t(e){return(e.startsWith("http")||e.startsWith("www"))&&/png|gif|jpe?g$/.test(e)}bot.addCommand({name:"mustache",fun:e,privileges:{del:"NONE"},description:"Mustachifies a user. `/mustache [link|usrid|user name]`"})}(),function(){function e(){Date.now(),i=i.filter(function(e){return e.time-=a,0>=e.time?(t(e),!1):!0}),setTimeout(e,a)}function t(e){bot.log(e,"nudge fire"),e.msg.reply(e.message)}function n(e,t,n){var o;if(bot.log(e,t,"/nudge input"),e=parseFloat(e),o=6e4*e,isNaN(o))return"Many things can be labeled Not a Number; a delay should not be one of them.";var r={msg:n,message:"*nudge* "+t,register:Date.now(),time:o};return i.push(r),bot.log(r,i,"/nudge register"),"Nudge registered."}function o(e){var t=e.parse();return n(t[0],t.slice(1).join(" "),e)}function r(e){return n(e.matches[1],e.matches[2],e)}var i=[],a=6e3;setTimeout(e,a),bot.addCommand({name:"nudge",fun:o,permissions:{del:"NONE"},description:"Register a nudge after an interval. `/nudge intervalInMinutes message`, or the listener, `nudge|remind|poke me? in? intervalInMinutes message`"}),bot.listen(/(?:nudge|remind|poke)\s(?:me\s)?(?:in\s)?(\d+m?)\s?(.*)$/,r)}(),function(){function e(e){function n(e){return e.name.toLowerCase().indexOf(i)>-1}function o(t){var n=e.escape(t.name);return"["+n+"](http://es5.github.com/#"+t.section+")"}var r,i=e.content.toLowerCase();return r=t.filter(n).map(o),bot.log(r,"/spec done"),r.length?r.join(", "):e+" not found in spec"}var t;t=[{section:"introduction",name:"Introduction"},{section:"x1",name:"1 Scope"},{section:"x2",name:"2 Conformance"},{section:"x3",name:"3 Normative references"},{section:"x4",name:"4 Overview"},{section:"x4.1",name:"4.1 Web Scripting"},{section:"x4.2",name:"4.2 Language Overview"},{section:"x4.2.1",name:"4.2.1 Objects"},{section:"x4.2.2",name:"4.2.2 The Strict Variant of ECMAScript"},{section:"x4.3",name:"4.3 Definitions"},{section:"x4.3.1",name:"4.3.1 type"},{section:"x4.3.2",name:"4.3.2 primitive value"},{section:"x4.3.3",name:"4.3.3 object"},{section:"x4.3.4",name:"4.3.4 constructor"},{section:"x4.3.5",name:"4.3.5 prototype"},{section:"x4.3.6",name:"4.3.6 native object"},{section:"x4.3.7",name:"4.3.7 built-in object"},{section:"x4.3.8",name:"4.3.8 host object"},{section:"x4.3.9",name:"4.3.9 undefined value"},{section:"x4.3.10",name:"4.3.10 Undefined type"},{section:"x4.3.11",name:"4.3.11 null value"},{section:"x4.3.12",name:"4.3.12 Null type"},{section:"x4.3.13",name:"4.3.13 Boolean value"},{section:"x4.3.14",name:"4.3.14 Boolean type"},{section:"x4.3.15",name:"4.3.15 Boolean object"},{section:"x4.3.16",name:"4.3.16 String value"},{section:"x4.3.17",name:"4.3.17 String type"},{section:"x4.3.18",name:"4.3.18 String object"},{section:"x4.3.19",name:"4.3.19 Number value"},{section:"x4.3.20",name:"4.3.20 Number type"},{section:"x4.3.21",name:"4.3.21 Number object"},{section:"x4.3.22",name:"4.3.22 Infinity"},{section:"x4.3.23",name:"4.3.23 NaN"},{section:"x4.3.24",name:"4.3.24 function"},{section:"x4.3.25",name:"4.3.25 built-in function"},{section:"x4.3.26",name:"4.3.26 property"},{section:"x4.3.27",name:"4.3.27 method"},{section:"x4.3.28",name:"4.3.28 built-in method"},{section:"x4.3.29",name:"4.3.29 attribute"},{section:"x4.3.30",name:"4.3.30 own property"},{section:"x4.3.31",name:"4.3.31 inherited property"},{section:"x5",name:"5 Notational Conventions"},{section:"x5.1",name:"5.1 Syntactic and Lexical Grammars"},{section:"x5.1.1",name:"5.1.1 Context-Free Grammars"},{section:"x5.1.2",name:"5.1.2 The Lexical and RegExp Grammars"},{section:"x5.1.3",name:"5.1.3 The Numeric String Grammar"},{section:"x5.1.4",name:"5.1.4 The Syntactic Grammar"},{section:"x5.1.5",name:"5.1.5 The JSON Grammar"},{section:"x5.1.6",name:"5.1.6 Grammar Notation"},{section:"x5.2",name:"5.2 Algorithm Conventions"},{section:"x6",name:"6 Source Text"},{section:"x7",name:"7 Lexical Conventions"},{section:"x7.1",name:"7.1 Unicode Format-Control Characters"},{section:"x7.2",name:"7.2 White Space"},{section:"x7.3",name:"7.3 Line Terminators"},{section:"x7.4",name:"7.4 Comments"},{section:"x7.5",name:"7.5 Tokens"},{section:"x7.6",name:"7.6 Identifier Names and Identifiers"},{section:"x7.6.1",name:"7.6.1 Reserved Words"},{section:"x7.6.1.1",name:"7.6.1.1 Keywords"},{section:"x7.6.1.2",name:"7.6.1.2 Future Reserved Words"},{section:"x7.7",name:"7.7 Punctuators"},{section:"x7.8",name:"7.8 Literals"},{section:"x7.8.1",name:"7.8.1 Null Literals"},{section:"x7.8.2",name:"7.8.2 Boolean Literals"},{section:"x7.8.3",name:"7.8.3 Numeric Literals"},{section:"x7.8.4",name:"7.8.4 String Literals"},{section:"x7.8.5",name:"7.8.5 Regular Expression Literals"},{section:"x7.9",name:"7.9 Automatic Semicolon Insertion"},{section:"x7.9.1",name:"7.9.1 Rules of Automatic Semicolon Insertion"},{section:"x7.9.2",name:"7.9.2 Examples of Automatic Semicolon Insertion"},{section:"x8",name:"8 Types"},{section:"x8.1",name:"8.1 The Undefined Type"},{section:"x8.2",name:"8.2 The Null Type"},{section:"x8.3",name:"8.3 The Boolean Type"},{section:"x8.4",name:"8.4 The String Type"},{section:"x8.5",name:"8.5 The Number Type"},{section:"x8.6",name:"8.6 The Object Type"},{section:"x8.6.1",name:"8.6.1 Property Attributes"},{section:"x8.6.2",name:"8.6.2 Object Internal Properties and Methods"},{section:"x8.7",name:"8.7 The Reference Specification Type"},{section:"x8.7.1",name:"8.7.1 GetValue (V)"},{section:"x8.7.2",name:"8.7.2 PutValue (V, W)"},{section:"x8.8",name:"8.8 The List Specification Type"},{section:"x8.9",name:"8.9 The Completion Specification Type"},{section:"x8.10",name:"8.10 The Property Descriptor and Property Identifier Specification Types"},{section:"x8.10.1",name:"8.10.1 IsAccessorDescriptor ( Desc )"},{section:"x8.10.2",name:"8.10.2 IsDataDescriptor ( Desc )"},{section:"x8.10.3",name:"8.10.3 IsGenericDescriptor ( Desc )"},{section:"x8.10.4",name:"8.10.4 FromPropertyDescriptor ( Desc )"},{section:"x8.10.5",name:"8.10.5 ToPropertyDescriptor ( Obj )"},{section:"x8.11",name:"8.11 The Lexical Environment and Environment Record Specification Types"},{section:"x8.12",name:"8.12 Algorithms for Object Internal Methods"},{section:"x8.12.1",name:"8.12.1 [[GetOwnProperty]] (P)"},{section:"x8.12.2",name:"8.12.2 [[GetProperty]] (P)"},{section:"x8.12.3",name:"8.12.3 [[Get]] (P)"},{section:"x8.12.4",name:"8.12.4 [[CanPut]] (P)"},{section:"x8.12.5",name:"8.12.5 [[Put]] ( P, V, Throw )"},{section:"x8.12.6",name:"8.12.6 [[HasProperty]] (P)"},{section:"x8.12.7",name:"8.12.7 [[Delete]] (P, Throw)"},{section:"x8.12.8",name:"8.12.8 [[DefaultValue]] (hint)"},{section:"x8.12.9",name:"8.12.9 [[DefineOwnProperty]] (P, Desc, Throw)"},{section:"x9",name:"9 Type Conversion and Testing"},{section:"x9.1",name:"9.1 ToPrimitive"},{section:"x9.2",name:"9.2 ToBoolean"},{section:"x9.3",name:"9.3 ToNumber"},{section:"x9.3.1",name:"9.3.1 ToNumber Applied to the String Type"},{section:"x9.4",name:"9.4 ToInteger"},{section:"x9.5",name:"9.5 ToInt32: (Signed 32 Bit Integer)"},{section:"x9.6",name:"9.6 ToUint32: (Unsigned 32 Bit Integer)"},{section:"x9.7",name:"9.7 ToUint16: (Unsigned 16 Bit Integer)"},{section:"x9.8",name:"9.8 ToString"},{section:"x9.8.1",name:"9.8.1 ToString Applied to the Number Type"},{section:"x9.9",name:"9.9 ToObject"},{section:"x9.10",name:"9.10 CheckObjectCoercible"},{section:"x9.11",name:"9.11 IsCallable"},{section:"x9.12",name:"9.12 The SameValue Algorithm"},{section:"x10",name:"10 Executable Code and Execution Contexts"},{section:"x10.1",name:"10.1 Types of Executable Code"},{section:"x10.1.1",name:"10.1.1 Strict Mode Code"},{section:"x10.2",name:"10.2 Lexical Environments"},{section:"x10.2.1",name:"10.2.1 Environment Records"},{section:"x10.2.1.1",name:"10.2.1.1 Declarative Environment Records"},{section:"x10.2.1.1.1",name:"10.2.1.1.1 HasBinding(N)"},{section:"x10.2.1.1.2",name:"10.2.1.1.2 CreateMutableBinding (N, D)"},{section:"x10.2.1.1.3",name:"10.2.1.1.3 SetMutableBinding (N,V,S)"},{section:"x10.2.1.1.4",name:"10.2.1.1.4 GetBindingValue(N,S)"},{section:"x10.2.1.1.5",name:"10.2.1.1.5 DeleteBinding (N)"},{section:"x10.2.1.1.6",name:"10.2.1.1.6 ImplicitThisValue()"},{section:"x10.2.1.1.7",name:"10.2.1.1.7 CreateImmutableBinding (N)"},{section:"x10.2.1.1.8",name:"10.2.1.1.8 InitializeImmutableBinding (N,V)"},{section:"x10.2.1.2",name:"10.2.1.2 Object Environment Records"},{section:"x10.2.1.2.1",name:"10.2.1.2.1 HasBinding(N)"},{section:"x10.2.1.2.2",name:"10.2.1.2.2 CreateMutableBinding (N, D)"},{section:"x10.2.1.2.3",name:"10.2.1.2.3 SetMutableBinding (N,V,S)"},{section:"x10.2.1.2.4",name:"10.2.1.2.4 GetBindingValue(N,S)"},{section:"x10.2.1.2.5",name:"10.2.1.2.5 DeleteBinding (N)"},{section:"x10.2.1.2.6",name:"10.2.1.2.6 ImplicitThisValue()"},{section:"x10.2.2",name:"10.2.2 Lexical Environment Operations"},{section:"x10.2.2.1",name:"10.2.2.1 GetIdentifierReference (lex, name, strict)"},{section:"x10.2.2.2",name:"10.2.2.2 NewDeclarativeEnvironment (E)"},{section:"x10.2.2.3",name:"10.2.2.3 NewObjectEnvironment (O, E)"},{section:"x10.2.3",name:"10.2.3 The Global Environment"},{section:"x10.3",name:"10.3 Execution Contexts"},{section:"x10.3.1",name:"10.3.1 Identifier Resolution"},{section:"x10.4",name:"10.4 Establishing an Execution Context"},{section:"x10.4.1",name:"10.4.1 Entering Global Code"},{section:"x10.4.1.1",name:"10.4.1.1 Initial Global Execution Context"},{section:"x10.4.2",name:"10.4.2 Entering Eval Code"},{section:"x10.4.2.1",name:"10.4.2.1 Strict Mode Restrictions"},{section:"x10.4.3",name:"10.4.3 Entering Function Code"},{section:"x10.5",name:"10.5 Declaration Binding Instantiation"},{section:"x10.6",name:"10.6 Arguments Object"},{section:"x11",name:"11 Expressions"},{section:"x11.1",name:"11.1 Primary Expressions"},{section:"x11.1.1",name:"11.1.1 The this Keyword"},{section:"x11.1.2",name:"11.1.2 Identifier Reference"},{section:"x11.1.3",name:"11.1.3 Literal Reference"},{section:"x11.1.4",name:"11.1.4 Array Initialiser"},{section:"x11.1.5",name:"11.1.5 Object Initialiser"},{section:"x11.1.6",name:"11.1.6 The Grouping Operator"},{section:"x11.2",name:"11.2 Left-Hand-Side Expressions"},{section:"x11.2.1",name:"11.2.1 Property Accessors"},{section:"x11.2.2",name:"11.2.2 The new Operator"},{section:"x11.2.3",name:"11.2.3 Function Calls"},{section:"x11.2.4",name:"11.2.4 Argument Lists"},{section:"x11.2.5",name:"11.2.5 Function Expressions"},{section:"x11.3",name:"11.3 Postfix Expressions"},{section:"x11.3.1",name:"11.3.1 Postfix Increment Operator"},{section:"x11.3.2",name:"11.3.2 Postfix Decrement Operator"},{section:"x11.4",name:"11.4 Unary Operators"},{section:"x11.4.1",name:"11.4.1 The delete Operator"},{section:"x11.4.2",name:"11.4.2 The void Operator"},{section:"x11.4.3",name:"11.4.3 The typeof Operator"},{section:"x11.4.4",name:"11.4.4 Prefix Increment Operator"},{section:"x11.4.5",name:"11.4.5 Prefix Decrement Operator"},{section:"x11.4.6",name:"11.4.6 Unary + Operator"},{section:"x11.4.7",name:"11.4.7 Unary - Operator"},{section:"x11.4.8",name:"11.4.8 Bitwise NOT Operator ( ~ )"},{section:"x11.4.9",name:"11.4.9 Logical NOT Operator ( ! )"},{section:"x11.5",name:"11.5 Multiplicative Operators"},{section:"x11.5.1",name:"11.5.1 Applying the * Operator"},{section:"x11.5.2",name:"11.5.2 Applying the / Operator"},{section:"x11.5.3",name:"11.5.3 Applying the % Operator"},{section:"x11.6",name:"11.6 Additive Operators"},{section:"x11.6.1",name:"11.6.1 The Addition operator ( + )"},{section:"x11.6.2",name:"11.6.2 The Subtraction Operator ( - )"},{section:"x11.6.3",name:"11.6.3 Applying the Additive Operators to Numbers"},{section:"x11.7",name:"11.7 Bitwise Shift Operators"},{section:"x11.7.1",name:"11.7.1 The Left Shift Operator ( << )"},{section:"x11.7.2",name:"11.7.2 The Signed Right Shift Operator ( >> )"},{section:"x11.7.3",name:"11.7.3 The Unsigned Right Shift Operator ( >>> )"},{section:"x11.8",name:"11.8 Relational Operators"},{section:"x11.8.1",name:"11.8.1 The Less-than Operator ( < )"},{section:"x11.8.2",name:"11.8.2 The Greater-than Operator ( > )"},{section:"x11.8.3",name:"11.8.3 The Less-than-or-equal Operator ( <= )"},{section:"x11.8.4",name:"11.8.4 The Greater-than-or-equal Operator ( >= )"},{section:"x11.8.5",name:"11.8.5 The Abstract Relational Comparison Algorithm"},{section:"x11.8.6",name:"11.8.6 The instanceof operator"},{section:"x11.8.7",name:"11.8.7 The in operator"},{section:"x11.9",name:"11.9 Equality Operators"},{section:"x11.9.1",name:"11.9.1 The Equals Operator ( == )"},{section:"x11.9.2",name:"11.9.2 The Does-not-equals Operator ( != )"},{section:"x11.9.3",name:"11.9.3 The Abstract Equality Comparison Algorithm"},{section:"x11.9.4",name:"11.9.4 The Strict Equals Operator ( === )"},{section:"x11.9.5",name:"11.9.5 The Strict Does-not-equal Operator ( !== )"},{section:"x11.9.6",name:"11.9.6 The Strict Equality Comparison Algorithm"},{section:"x11.10",name:"11.10 Binary Bitwise Operators"},{section:"x11.11",name:"11.11 Binary Logical Operators"},{section:"x11.12",name:"11.12 Conditional Operator ( ? : )"},{section:"x11.13",name:"11.13 Assignment Operators"},{section:"x11.13.1",name:"11.13.1 Simple Assignment ( = )"},{section:"x11.13.2",name:"11.13.2 Compound Assignment ( op= )"},{section:"x11.14",name:"11.14 Comma Operator ( , )"},{section:"x12",name:"12 Statements"},{section:"x12.1",name:"12.1 Block"},{section:"x12.2",name:"12.2 Variable Statement"},{section:"x12.2.1",name:"12.2.1 Strict Mode Restrictions"},{section:"x12.3",name:"12.3 Empty Statement"},{section:"x12.4",name:"12.4 Expression Statement"},{section:"x12.5",name:"12.5 The if Statement"},{section:"x12.6",name:"12.6 Iteration Statements"},{section:"x12.6.1",name:"12.6.1 The do-while Statement"},{section:"x12.6.2",name:"12.6.2 The while Statement"},{section:"x12.6.3",name:"12.6.3 The for Statement"},{section:"x12.6.4",name:"12.6.4 The for-in Statement"},{section:"x12.7",name:"12.7 The continue Statement"},{section:"x12.8",name:"12.8 The break Statement"},{section:"x12.9",name:"12.9 The return Statement"},{section:"x12.10",name:"12.10 The with Statement"},{section:"x12.10.1",name:"12.10.1 Strict Mode Restrictions"},{section:"x12.11",name:"12.11 The switch Statement"},{section:"x12.12",name:"12.12 Labelled Statements"},{section:"x12.13",name:"12.13 The throw Statement"},{section:"x12.14",name:"12.14 The try Statement"},{section:"x12.14.1",name:"12.14.1 Strict Mode Restrictions"},{section:"x12.15",name:"12.15 The debugger statement"},{section:"x13",name:"13 Function Definition"},{section:"x13.1",name:"13.1 Strict Mode Restrictions"},{section:"x13.2",name:"13.2 Creating Function Objects"},{section:"x13.2.1",name:"13.2.1 [[Call]]"},{section:"x13.2.2",name:"13.2.2 [[Construct]]"},{section:"x13.2.3",name:"13.2.3 The Function Object"},{section:"x14",name:"14 Program"},{section:"x14.1",name:"14.1 Directive Prologues and the Use Strict Directive"},{section:"x15",name:"15 Standard Built-in ECMAScript Objects"},{section:"x15.1",name:"15.1 The Global Object"},{section:"x15.1.1",name:"15.1.1 Value Properties of the Global Object"},{section:"x15.1.1.1",name:"15.1.1.1 NaN"},{section:"x15.1.1.2",name:"15.1.1.2 Infinity"},{section:"x15.1.1.3",name:"15.1.1.3 undefined"},{section:"x15.1.2",name:"15.1.2 Function Properties of the Global Object"},{section:"x15.1.2.1",name:"15.1.2.1 eval (x)"},{section:"x15.1.2.1.1",name:"15.1.2.1.1 Direct Call to Eval"},{section:"x15.1.2.2",name:"15.1.2.2 parseInt (string , radix)"},{section:"x15.1.2.3",name:"15.1.2.3 parseFloat (string)"},{section:"x15.1.2.4",name:"15.1.2.4 isNaN (number)"},{section:"x15.1.2.5",name:"15.1.2.5 isFinite (number)"},{section:"x15.1.3",name:"15.1.3 URI Handling Function Properties"},{section:"x15.1.3.1",name:"15.1.3.1 decodeURI (encodedURI)"},{section:"x15.1.3.2",name:"15.1.3.2 decodeURIComponent (encodedURIComponent)"},{section:"x15.1.3.3",name:"15.1.3.3 encodeURI (uri)"},{section:"x15.1.3.4",name:"15.1.3.4 encodeURIComponent (uriComponent)"},{section:"x15.1.4",name:"15.1.4 Constructor Properties of the Global Object"},{section:"x15.1.4.1",name:"15.1.4.1 Object ( . . . )"},{section:"x15.1.4.2",name:"15.1.4.2 Function ( . . . )"},{section:"x15.1.4.3",name:"15.1.4.3 Array ( . . . )"},{section:"x15.1.4.4",name:"15.1.4.4 String ( . . . )"},{section:"x15.1.4.5",name:"15.1.4.5 Boolean ( . . . )"},{section:"x15.1.4.6",name:"15.1.4.6 Number ( . . . )"},{section:"x15.1.4.7",name:"15.1.4.7 Date ( . . . )"},{section:"x15.1.4.8",name:"15.1.4.8 RegExp ( . . . )"},{section:"x15.1.4.9",name:"15.1.4.9 Error ( . . . )"},{section:"x15.1.4.10",name:"15.1.4.10 EvalError ( . . . )"},{section:"x15.1.4.11",name:"15.1.4.11 RangeError ( . . . )"},{section:"x15.1.4.12",name:"15.1.4.12 ReferenceError ( . . . )"},{section:"x15.1.4.13",name:"15.1.4.13 SyntaxError ( . . . )"},{section:"x15.1.4.14",name:"15.1.4.14 TypeError ( . . . )"},{section:"x15.1.4.15",name:"15.1.4.15 URIError ( . . . )"},{section:"x15.1.5",name:"15.1.5 Other Properties of the Global Object"},{section:"x15.1.5.1",name:"15.1.5.1 Math"},{section:"x15.1.5.2",name:"15.1.5.2 JSON"},{section:"x15.2",name:"15.2 Object Objects"},{section:"x15.2.1",name:"15.2.1 The Object Constructor Called as a Function"},{section:"x15.2.1.1",name:"15.2.1.1 Object ( [ value ] )"},{section:"x15.2.2",name:"15.2.2 The Object Constructor"},{section:"x15.2.2.1",name:"15.2.2.1 new Object ( [ value ] )"},{section:"x15.2.3",name:"15.2.3 Properties of the Object Constructor"},{section:"x15.2.3.1",name:"15.2.3.1 Object.prototype"},{section:"x15.2.3.2",name:"15.2.3.2 Object.getPrototypeOf ( O )"},{section:"x15.2.3.3",name:"15.2.3.3 Object.getOwnPropertyDescriptor ( O, P ) "},{section:"x15.2.3.4",name:"15.2.3.4 Object.getOwnPropertyNames ( O )"},{section:"x15.2.3.5",name:"15.2.3.5 Object.create ( O [, Properties] )"},{section:"x15.2.3.6",name:"15.2.3.6 Object.defineProperty ( O, P, Attributes )"},{section:"x15.2.3.7",name:"15.2.3.7 Object.defineProperties ( O, Properties )"},{section:"x15.2.3.8",name:"15.2.3.8 Object.seal ( O )"},{section:"x15.2.3.9",name:"15.2.3.9 Object.freeze ( O )"},{section:"x15.2.3.10",name:"15.2.3.10 Object.preventExtensions ( O )"},{section:"x15.2.3.11",name:"15.2.3.11 Object.isSealed ( O )"},{section:"x15.2.3.12",name:"15.2.3.12 Object.isFrozen ( O )"},{section:"x15.2.3.13",name:"15.2.3.13 Object.isExtensible ( O )"},{section:"x15.2.3.14",name:"15.2.3.14 Object.keys ( O )"},{section:"x15.2.4",name:"15.2.4 Properties of the Object Prototype Object"},{section:"x15.2.4.1",name:"15.2.4.1 Object.prototype.constructor"},{section:"x15.2.4.2",name:"15.2.4.2 Object.prototype.toString ( )"},{section:"x15.2.4.3",name:"15.2.4.3 Object.prototype.toLocaleString ( )"},{section:"x15.2.4.4",name:"15.2.4.4 Object.prototype.valueOf ( )"},{section:"x15.2.4.5",name:"15.2.4.5 Object.prototype.hasOwnProperty (V)"},{section:"x15.2.4.6",name:"15.2.4.6 Object.prototype.isPrototypeOf (V)"},{section:"x15.2.4.7",name:"15.2.4.7 Object.prototype.propertyIsEnumerable (V)"},{section:"x15.2.5",name:"15.2.5 Properties of Object Instances"},{section:"x15.3",name:"15.3 Function Objects"},{section:"x15.3.1",name:"15.3.1 The Function Constructor Called as a Function"},{section:"x15.3.1.1",name:"15.3.1.1 Function (p1, p2, … , pn, body)"},{section:"x15.3.2",name:"15.3.2 The Function Constructor"},{section:"x15.3.2.1",name:"15.3.2.1 new Function (p1, p2, … , pn, body)"},{section:"x15.3.3",name:"15.3.3 Properties of the Function Constructor"},{section:"x15.3.3.1",name:"15.3.3.1 Function.prototype"},{section:"x15.3.3.2",name:"15.3.3.2 Function.length"},{section:"x15.3.4",name:"15.3.4 Properties of the Function Prototype Object"},{section:"x15.3.4.1",name:"15.3.4.1 Function.prototype.constructor"},{section:"x15.3.4.2",name:"15.3.4.2 Function.prototype.toString ( )"},{section:"x15.3.4.3",name:"15.3.4.3 Function.prototype.apply (thisArg, argArray)"},{section:"x15.3.4.4",name:"15.3.4.4 Function.prototype.call (thisArg [ , arg1 [ , arg2, … ] ] )"},{section:"x15.3.4.5",name:"15.3.4.5 Function.prototype.bind (thisArg [, arg1 [, arg2, …]])"},{section:"x15.3.4.5.1",name:"15.3.4.5.1 [[Call]]"},{section:"x15.3.4.5.2",name:"15.3.4.5.2 [[Construct]]"},{section:"x15.3.4.5.3",name:"15.3.4.5.3 [[HasInstance]] (V)"},{section:"x15.3.5",name:"15.3.5 Properties of Function Instances"},{section:"x15.3.5.1",name:"15.3.5.1 length"},{section:"x15.3.5.2",name:"15.3.5.2 prototype"},{section:"x15.3.5.3",name:"15.3.5.3 [[HasInstance]] (V)"},{section:"x15.3.5.4",name:"15.3.5.4 [[Get]] (P)"},{section:"x15.4",name:"15.4 Array Objects"},{section:"x15.4.1",name:"15.4.1 The Array Constructor Called as a Function"},{section:"x15.4.1.1",name:"15.4.1.1 Array ( [ item1 [ , item2 [ , … ] ] ] )"},{section:"x15.4.2",name:"15.4.2 The Array Constructor"},{section:"x15.4.2.1",name:"15.4.2.1 new Array ( [ item0 [ , item1 [ , … ] ] ] )"},{section:"x15.4.2.2",name:"15.4.2.2 new Array (len)"},{section:"x15.4.3",name:"15.4.3 Properties of the Array Constructor"},{section:"x15.4.3.1",name:"15.4.3.1 Array.prototype"},{section:"x15.4.3.2",name:"15.4.3.2 Array.isArray ( arg )"},{section:"x15.4.4",name:"15.4.4 Properties of the Array Prototype Object"},{section:"x15.4.4.1",name:"15.4.4.1 Array.prototype.constructor"},{section:"x15.4.4.2",name:"15.4.4.2 Array.prototype.toString ( )"},{section:"x15.4.4.3",name:"15.4.4.3 Array.prototype.toLocaleString ( )"},{section:"x15.4.4.4",name:"15.4.4.4 Array.prototype.concat ( [ item1 [ , item2 [ , … ] ] ] )"},{section:"x15.4.4.5",name:"15.4.4.5 Array.prototype.join (separator)"},{section:"x15.4.4.6",name:"15.4.4.6 Array.prototype.pop ( )"},{section:"x15.4.4.7",name:"15.4.4.7 Array.prototype.push ( [ item1 [ , item2 [ , … ] ] ] )"},{section:"x15.4.4.8",name:"15.4.4.8 Array.prototype.reverse ( )"},{section:"x15.4.4.9",name:"15.4.4.9 Array.prototype.shift ( )"},{section:"x15.4.4.10",name:"15.4.4.10 Array.prototype.slice (start, end)"},{section:"x15.4.4.11",name:"15.4.4.11 Array.prototype.sort (comparefn)"},{section:"x15.4.4.12",name:"15.4.4.12 Array.prototype.splice (start, deleteCount [ , item1 [ , item2 [ , … ] ] ] )"},{section:"x15.4.4.13",name:"15.4.4.13 Array.prototype.unshift ( [ item1 [ , item2 [ , … ] ] ] )"},{section:"x15.4.4.14",name:"15.4.4.14 Array.prototype.indexOf ( searchElement [ , fromIndex ] )"},{section:"x15.4.4.15",name:"15.4.4.15 Array.prototype.lastIndexOf ( searchElement [ , fromIndex ] )"},{section:"x15.4.4.16",name:"15.4.4.16 Array.prototype.every ( callbackfn [ , thisArg ] )"},{section:"x15.4.4.17",name:"15.4.4.17 Array.prototype.some ( callbackfn [ , thisArg ] )"},{section:"x15.4.4.18",name:"15.4.4.18 Array.prototype.forEach ( callbackfn [ , thisArg ] )"},{section:"x15.4.4.19",name:"15.4.4.19 Array.prototype.map ( callbackfn [ , thisArg ] )"},{section:"x15.4.4.20",name:"15.4.4.20 Array.prototype.filter ( callbackfn [ , thisArg ] )"},{section:"x15.4.4.21",name:"15.4.4.21 Array.prototype.reduce ( callbackfn [ , initialValue ] )"},{section:"x15.4.4.22",name:"15.4.4.22 Array.prototype.reduceRight ( callbackfn [ , initialValue ] )"},{section:"x15.4.5",name:"15.4.5 Properties of Array Instances"},{section:"x15.4.5.1",name:"15.4.5.1 [[DefineOwnProperty]] ( P, Desc, Throw )"},{section:"x15.4.5.2",name:"15.4.5.2 length"},{section:"x15.5",name:"15.5 String Objects"},{section:"x15.5.1",name:"15.5.1 The String Constructor Called as a Function"},{section:"x15.5.1.1",name:"15.5.1.1 String ( [ value ] )"},{section:"x15.5.2",name:"15.5.2 The String Constructor"},{section:"x15.5.2.1",name:"15.5.2.1 new String ( [ value ] )"},{section:"x15.5.3",name:"15.5.3 Properties of the String Constructor"},{section:"x15.5.3.1",name:"15.5.3.1 String.prototype"},{section:"x15.5.3.2",name:"15.5.3.2 String.fromCharCode ( [ char0 [ , char1 [ , … ] ] ] )"},{section:"x15.5.4",name:"15.5.4 Properties of the String Prototype Object"},{section:"x15.5.4.1",name:"15.5.4.1 String.prototype.constructor"},{section:"x15.5.4.2",name:"15.5.4.2 String.prototype.toString ( )"},{section:"x15.5.4.3",name:"15.5.4.3 String.prototype.valueOf ( )"},{section:"x15.5.4.4",name:"15.5.4.4 String.prototype.charAt (pos)"},{section:"x15.5.4.5",name:"15.5.4.5 String.prototype.charCodeAt (pos)"},{section:"x15.5.4.6",name:"15.5.4.6 String.prototype.concat ( [ string1 [ , string2 [ , … ] ] ] )"},{section:"x15.5.4.7",name:"15.5.4.7 String.prototype.indexOf (searchString, position)"},{section:"x15.5.4.8",name:"15.5.4.8 String.prototype.lastIndexOf (searchString, position)"},{section:"x15.5.4.9",name:"15.5.4.9 String.prototype.localeCompare (that)"},{section:"x15.5.4.10",name:"15.5.4.10 String.prototype.match (regexp)"},{section:"x15.5.4.11",name:"15.5.4.11 String.prototype.replace (searchValue, replaceValue)"},{section:"x15.5.4.12",name:"15.5.4.12 String.prototype.search (regexp)"},{section:"x15.5.4.13",name:"15.5.4.13 String.prototype.slice (start, end)"},{section:"x15.5.4.14",name:"15.5.4.14 String.prototype.split (separator, limit)"},{section:"x15.5.4.15",name:"15.5.4.15 String.prototype.substring (start, end)"},{section:"x15.5.4.16",name:"15.5.4.16 String.prototype.toLowerCase ( )"},{section:"x15.5.4.17",name:"15.5.4.17 String.prototype.toLocaleLowerCase ( )"},{section:"x15.5.4.18",name:"15.5.4.18 String.prototype.toUpperCase ( )"},{section:"x15.5.4.19",name:"15.5.4.19 String.prototype.toLocaleUpperCase ( )"},{section:"x15.5.4.20",name:"15.5.4.20 String.prototype.trim ( )"},{section:"x15.5.5",name:"15.5.5 Properties of String Instances"},{section:"x15.5.5.1",name:"15.5.5.1 length"},{section:"x15.5.5.2",name:"15.5.5.2 [[GetOwnProperty]] ( P )"},{section:"x15.6",name:"15.6 Boolean Objects"},{section:"x15.6.1",name:"15.6.1 The Boolean Constructor Called as a Function"},{section:"x15.6.1.1",name:"15.6.1.1 Boolean (value)"},{section:"x15.6.2",name:"15.6.2 The Boolean Constructor"},{section:"x15.6.2.1",name:"15.6.2.1 new Boolean (value)"},{section:"x15.6.3",name:"15.6.3 Properties of the Boolean Constructor"},{section:"x15.6.3.1",name:"15.6.3.1 Boolean.prototype"},{section:"x15.6.4",name:"15.6.4 Properties of the Boolean Prototype Object"},{section:"x15.6.4.1",name:"15.6.4.1 Boolean.prototype.constructor"},{section:"x15.6.4.2",name:"15.6.4.2 Boolean.prototype.toString ( )"},{section:"x15.6.4.3",name:"15.6.4.3 Boolean.prototype.valueOf ( )"},{section:"x15.6.5",name:"15.6.5 Properties of Boolean Instances"},{section:"x15.7",name:"15.7 Number Objects"},{section:"x15.7.1",name:"15.7.1 The Number Constructor Called as a Function"},{section:"x15.7.1.1",name:"15.7.1.1 Number ( [ value ] )"},{section:"x15.7.2",name:"15.7.2 The Number Constructor"},{section:"x15.7.2.1",name:"15.7.2.1 new Number ( [ value ] )"},{section:"x15.7.3",name:"15.7.3 Properties of the Number Constructor"},{section:"x15.7.3.1",name:"15.7.3.1 Number.prototype"},{section:"x15.7.3.2",name:"15.7.3.2 Number.MAX_VALUE"},{section:"x15.7.3.3",name:"15.7.3.3 Number.MIN_VALUE"},{section:"x15.7.3.4",name:"15.7.3.4 Number.NaN"},{section:"x15.7.3.5",name:"15.7.3.5 Number.NEGATIVE_INFINITY"},{section:"x15.7.3.6",name:"15.7.3.6 Number.POSITIVE_INFINITY"},{section:"x15.7.4",name:"15.7.4 Properties of the Number Prototype Object"},{section:"x15.7.4.1",name:"15.7.4.1 Number.prototype.constructor"},{section:"x15.7.4.2",name:"15.7.4.2 Number.prototype.toString ( [ radix ] )"},{section:"x15.7.4.3",name:"15.7.4.3 Number.prototype.toLocaleString()"},{section:"x15.7.4.4",name:"15.7.4.4 Number.prototype.valueOf ( )"},{section:"x15.7.4.5",name:"15.7.4.5 Number.prototype.toFixed (fractionDigits)"},{section:"x15.7.4.6",name:"15.7.4.6 Number.prototype.toExponential (fractionDigits)"},{section:"x15.7.4.7",name:"15.7.4.7 Number.prototype.toPrecision (precision)"},{section:"x15.7.5",name:"15.7.5 Properties of Number Instances"},{section:"x15.8",name:"15.8 The Math Object"},{section:"x15.8.1",name:"15.8.1 Value Properties of the Math Object"},{section:"x15.8.1.1",name:"15.8.1.1 E"},{section:"x15.8.1.2",name:"15.8.1.2 LN10"},{section:"x15.8.1.3",name:"15.8.1.3 LN2"},{section:"x15.8.1.4",name:"15.8.1.4 LOG2E"},{section:"x15.8.1.5",name:"15.8.1.5 LOG10E"},{section:"x15.8.1.6",name:"15.8.1.6 PI"},{section:"x15.8.1.7",name:"15.8.1.7 SQRT1_2"},{section:"x15.8.1.8",name:"15.8.1.8 SQRT2"},{section:"x15.8.2",name:"15.8.2 Function Properties of the Math Object"},{section:"x15.8.2.1",name:"15.8.2.1 abs (x)"},{section:"x15.8.2.2",name:"15.8.2.2 acos (x)"},{section:"x15.8.2.3",name:"15.8.2.3 asin (x)"},{section:"x15.8.2.4",name:"15.8.2.4 atan (x)"},{section:"x15.8.2.5",name:"15.8.2.5 atan2 (y, x)"},{section:"x15.8.2.6",name:"15.8.2.6 ceil (x)"},{section:"x15.8.2.7",name:"15.8.2.7 cos (x)"},{section:"x15.8.2.8",name:"15.8.2.8 exp (x)"},{section:"x15.8.2.9",name:"15.8.2.9 floor (x)"},{section:"x15.8.2.10",name:"15.8.2.10 log (x)"},{section:"x15.8.2.11",name:"15.8.2.11 max ( [ value1 [ , value2 [ , … ] ] ] )"},{section:"x15.8.2.12",name:"15.8.2.12 min ( [ value1 [ , value2 [ , … ] ] ] )"},{section:"x15.8.2.13",name:"15.8.2.13 pow (x, y)"},{section:"x15.8.2.14",name:"15.8.2.14 random ( )"},{section:"x15.8.2.15",name:"15.8.2.15 round (x)"},{section:"x15.8.2.16",name:"15.8.2.16 sin (x)"},{section:"x15.8.2.17",name:"15.8.2.17 sqrt (x)"},{section:"x15.8.2.18",name:"15.8.2.18 tan (x)"},{section:"x15.9",name:"15.9 Date Objects"},{section:"x15.9.1",name:"15.9.1 Overview of Date Objects and Definitions of Abstract Operators"},{section:"x15.9.1.1",name:"15.9.1.1 Time Values and Time Range"},{section:"x15.9.1.2",name:"15.9.1.2 Day Number and Time within Day"},{section:"x15.9.1.3",name:"15.9.1.3 Year Number"},{section:"x15.9.1.4",name:"15.9.1.4 Month Number"},{section:"x15.9.1.5",name:"15.9.1.5 Date Number"},{section:"x15.9.1.6",name:"15.9.1.6 Week Day"},{section:"x15.9.1.7",name:"15.9.1.7 Local Time Zone Adjustment"},{section:"x15.9.1.8",name:"15.9.1.8 Daylight Saving Time Adjustment"},{section:"x15.9.1.9",name:"15.9.1.9 Local Time"},{section:"x15.9.1.10",name:"15.9.1.10 Hours, Minutes, Second, and Milliseconds"},{section:"x15.9.1.11",name:"15.9.1.11 MakeTime (hour, min, sec, ms)"},{section:"x15.9.1.12",name:"15.9.1.12 MakeDay (year, month, date)"},{section:"x15.9.1.13",name:"15.9.1.13 MakeDate (day, time)"},{section:"x15.9.1.14",name:"15.9.1.14 TimeClip (time)"},{section:"x15.9.1.15",name:"15.9.1.15 Date Time String Format"},{section:"x15.9.1.15.1",name:"15.9.1.15.1 Extended years"},{section:"x15.9.2",name:"15.9.2 The Date Constructor Called as a Function"},{section:"x15.9.2.1",name:"15.9.2.1 Date ( [ year [, month [, date [, hours [, minutes [, seconds [, ms ] ] ] ] ] ] ] )"},{section:"x15.9.3",name:"15.9.3 The Date Constructor"},{section:"x15.9.3.1",name:"15.9.3.1 new Date (year, month [, date [, hours [, minutes [, seconds [, ms ] ] ] ] ] )"},{section:"x15.9.3.2",name:"15.9.3.2 new Date (value)"},{section:"x15.9.3.3",name:"15.9.3.3 new Date ( )"},{section:"x15.9.4",name:"15.9.4 Properties of the Date Constructor"},{section:"x15.9.4.1",name:"15.9.4.1 Date.prototype"},{section:"x15.9.4.2",name:"15.9.4.2 Date.parse (string)"},{section:"x15.9.4.3",name:"15.9.4.3 Date.UTC (year, month [, date [, hours [, minutes [, seconds [, ms ] ] ] ] ])"},{section:"x15.9.4.4",name:"15.9.4.4 Date.now ( )"},{section:"x15.9.5",name:"15.9.5 Properties of the Date Prototype Object"},{section:"x15.9.5.1",name:"15.9.5.1 Date.prototype.constructor"},{section:"x15.9.5.2",name:"15.9.5.2 Date.prototype.toString ( )"},{section:"x15.9.5.3",name:"15.9.5.3 Date.prototype.toDateString ( )"},{section:"x15.9.5.4",name:"15.9.5.4 Date.prototype.toTimeString ( )"},{section:"x15.9.5.5",name:"15.9.5.5 Date.prototype.toLocaleString ( )"},{section:"x15.9.5.6",name:"15.9.5.6 Date.prototype.toLocaleDateString ( )"},{section:"x15.9.5.7",name:"15.9.5.7 Date.prototype.toLocaleTimeString ( )"},{section:"x15.9.5.8",name:"15.9.5.8 Date.prototype.valueOf ( )"},{section:"x15.9.5.9",name:"15.9.5.9 Date.prototype.getTime ( )"},{section:"x15.9.5.10",name:"15.9.5.10 Date.prototype.getFullYear ( )"},{section:"x15.9.5.11",name:"15.9.5.11 Date.prototype.getUTCFullYear ( )"},{section:"x15.9.5.12",name:"15.9.5.12 Date.prototype.getMonth ( )"},{section:"x15.9.5.13",name:"15.9.5.13 Date.prototype.getUTCMonth ( )"},{section:"x15.9.5.14",name:"15.9.5.14 Date.prototype.getDate ( )"},{section:"x15.9.5.15",name:"15.9.5.15 Date.prototype.getUTCDate ( )"},{section:"x15.9.5.16",name:"15.9.5.16 Date.prototype.getDay ( )"},{section:"x15.9.5.17",name:"15.9.5.17 Date.prototype.getUTCDay ( )"},{section:"x15.9.5.18",name:"15.9.5.18 Date.prototype.getHours ( )"},{section:"x15.9.5.19",name:"15.9.5.19 Date.prototype.getUTCHours ( )"},{section:"x15.9.5.20",name:"15.9.5.20 Date.prototype.getMinutes ( )"},{section:"x15.9.5.21",name:"15.9.5.21 Date.prototype.getUTCMinutes ( )"},{section:"x15.9.5.22",name:"15.9.5.22 Date.prototype.getSeconds ( )"},{section:"x15.9.5.23",name:"15.9.5.23 Date.prototype.getUTCSeconds ( )"},{section:"x15.9.5.24",name:"15.9.5.24 Date.prototype.getMilliseconds ( )"},{section:"x15.9.5.25",name:"15.9.5.25 Date.prototype.getUTCMilliseconds ( )"},{section:"x15.9.5.26",name:"15.9.5.26 Date.prototype.getTimezoneOffset ( )"},{section:"x15.9.5.27",name:"15.9.5.27 Date.prototype.setTime (time)"},{section:"x15.9.5.28",name:"15.9.5.28 Date.prototype.setMilliseconds (ms)"},{section:"x15.9.5.29",name:"15.9.5.29 Date.prototype.setUTCMilliseconds (ms)"},{section:"x15.9.5.30",name:"15.9.5.30 Date.prototype.setSeconds (sec [, ms ] )"},{section:"x15.9.5.31",name:"15.9.5.31 Date.prototype.setUTCSeconds (sec [, ms ] )"},{section:"x15.9.5.32",name:"15.9.5.32 Date.prototype.setMinutes (min [, sec [, ms ] ] )"},{section:"x15.9.5.33",name:"15.9.5.33 Date.prototype.setUTCMinutes (min [, sec [, ms ] ] )"},{section:"x15.9.5.34",name:"15.9.5.34 Date.prototype.setHours (hour [, min [, sec [, ms ] ] ] )"},{section:"x15.9.5.35",name:"15.9.5.35 Date.prototype.setUTCHours (hour [, min [, sec [, ms ] ] ] )"},{section:"x15.9.5.36",name:"15.9.5.36 Date.prototype.setDate (date)"},{section:"x15.9.5.37",name:"15.9.5.37 Date.prototype.setUTCDate (date)"},{section:"x15.9.5.38",name:"15.9.5.38 Date.prototype.setMonth (month [, date ] )"},{section:"x15.9.5.39",name:"15.9.5.39 Date.prototype.setUTCMonth (month [, date ] )"},{section:"x15.9.5.40",name:"15.9.5.40 Date.prototype.setFullYear (year [, month [, date ] ] )"},{section:"x15.9.5.41",name:"15.9.5.41 Date.prototype.setUTCFullYear (year [, month [, date ] ] )"},{section:"x15.9.5.42",name:"15.9.5.42 Date.prototype.toUTCString ( )"},{section:"x15.9.5.43",name:"15.9.5.43 Date.prototype.toISOString ( )"},{section:"x15.9.5.44",name:"15.9.5.44 Date.prototype.toJSON ( key )"},{section:"x15.9.6",name:"15.9.6 Properties of Date Instances"},{section:"x15.10",name:"15.10 RegExp (Regular Expression) Objects"},{section:"x15.10.1",name:"15.10.1 Patterns"},{section:"x15.10.2",name:"15.10.2 Pattern Semantics"},{section:"x15.10.2.1",name:"15.10.2.1 Notation"},{section:"x15.10.2.2",name:"15.10.2.2 Pattern"},{section:"x15.10.2.3",name:"15.10.2.3 Disjunction"},{section:"x15.10.2.4",name:"15.10.2.4 Alternative"},{section:"x15.10.2.5",name:"15.10.2.5 Term"},{section:"x15.10.2.6",name:"15.10.2.6 Assertion"},{section:"x15.10.2.7",name:"15.10.2.7 Quantifier"},{section:"x15.10.2.8",name:"15.10.2.8 Atom"},{section:"x15.10.2.9",name:"15.10.2.9 AtomEscape"},{section:"x15.10.2.10",name:"15.10.2.10 CharacterEscape"},{section:"x15.10.2.11",name:"15.10.2.11 DecimalEscape"},{section:"x15.10.2.12",name:"15.10.2.12 CharacterClassEscape"},{section:"x15.10.2.13",name:"15.10.2.13 CharacterClass"},{section:"x15.10.2.14",name:"15.10.2.14 ClassRanges"},{section:"x15.10.2.15",name:"15.10.2.15 NonemptyClassRanges"},{section:"x15.10.2.16",name:"15.10.2.16 NonemptyClassRangesNoDash"},{section:"x15.10.2.17",name:"15.10.2.17 ClassAtom"},{section:"x15.10.2.18",name:"15.10.2.18 ClassAtomNoDash"},{section:"x15.10.2.19",name:"15.10.2.19 ClassEscape"},{section:"x15.10.3",name:"15.10.3 The RegExp Constructor Called as a Function"},{section:"x15.10.3.1",name:"15.10.3.1 RegExp(pattern, flags)"},{section:"x15.10.4",name:"15.10.4 The RegExp Constructor"},{section:"x15.10.4.1",name:"15.10.4.1 new RegExp(pattern, flags)"},{section:"x15.10.5",name:"15.10.5 Properties of the RegExp Constructor"},{section:"x15.10.5.1",name:"15.10.5.1 RegExp.prototype"},{section:"x15.10.6",name:"15.10.6 Properties of the RegExp Prototype Object"},{section:"x15.10.6.1",name:"15.10.6.1 RegExp.prototype.constructor"},{section:"x15.10.6.2",name:"15.10.6.2 RegExp.prototype.exec(string)"},{section:"x15.10.6.3",name:"15.10.6.3 RegExp.prototype.test(string)"},{section:"x15.10.6.4",name:"15.10.6.4 RegExp.prototype.toString()"},{section:"x15.10.7",name:"15.10.7 Properties of RegExp Instances"},{section:"x15.10.7.1",name:"15.10.7.1 source"},{section:"x15.10.7.2",name:"15.10.7.2 global"},{section:"x15.10.7.3",name:"15.10.7.3 ignoreCase"},{section:"x15.10.7.4",name:"15.10.7.4 multiline"},{section:"x15.10.7.5",name:"15.10.7.5 lastIndex"},{section:"x15.11",name:"15.11 Error Objects"},{section:"x15.11.1",name:"15.11.1 The Error Constructor Called as a Function"},{section:"x15.11.1.1",name:"15.11.1.1 Error (message)"},{section:"x15.11.2",name:"15.11.2 The Error Constructor"},{section:"x15.11.2.1",name:"15.11.2.1 new Error (message)"},{section:"x15.11.3",name:"15.11.3 Properties of the Error Constructor"},{section:"x15.11.3.1",name:"15.11.3.1 Error.prototype"},{section:"x15.11.4",name:"15.11.4 Properties of the Error Prototype Object"},{section:"x15.11.4.1",name:"15.11.4.1 Error.prototype.constructor"},{section:"x15.11.4.2",name:"15.11.4.2 Error.prototype.name"},{section:"x15.11.4.3",name:"15.11.4.3 Error.prototype.message"},{section:"x15.11.4.4",name:"15.11.4.4 Error.prototype.toString ( )"},{section:"x15.11.5",name:"15.11.5 Properties of Error Instances"},{section:"x15.11.6",name:"15.11.6 Native Error Types Used in This Standard"},{section:"x15.11.6.1",name:"15.11.6.1 EvalError"},{section:"x15.11.6.2",name:"15.11.6.2 RangeError"},{section:"x15.11.6.3",name:"15.11.6.3 ReferenceError"},{section:"x15.11.6.4",name:"15.11.6.4 SyntaxError"},{section:"x15.11.6.5",name:"15.11.6.5 TypeError"},{section:"x15.11.6.6",name:"15.11.6.6 URIError"},{section:"x15.11.7",name:"15.11.7 NativeError Object Structure"},{section:"x15.11.7.1",name:"15.11.7.1 NativeError Constructors Called as Functions"},{section:"x15.11.7.2",name:"15.11.7.2 NativeError (message)"},{section:"x15.11.7.3",name:"15.11.7.3 The NativeError Constructors"},{section:"x15.11.7.4",name:"15.11.7.4 New NativeError (message)"},{section:"x15.11.7.5",name:"15.11.7.5 Properties of the NativeError Constructors"},{section:"x15.11.7.6",name:"15.11.7.6 NativeError.prototype"},{section:"x15.11.7.7",name:"15.11.7.7 Properties of the NativeError Prototype Objects"},{section:"x15.11.7.8",name:"15.11.7.8 NativeError.prototype.constructor"},{section:"x15.11.7.9",name:"15.11.7.9 NativeError.prototype.name"},{section:"x15.11.7.10",name:"15.11.7.10 NativeError.prototype.message"},{section:"x15.11.7.11",name:"15.11.7.11 Properties of NativeError Instances"},{section:"x15.12",name:"15.12 The JSON Object"},{section:"x15.12.1",name:"15.12.1 The JSON Grammar  "},{section:"x15.12.1.1",name:"15.12.1.1 The JSON Lexical Grammar"},{section:"x15.12.1.2",name:"15.12.1.2 The JSON Syntactic Grammar"},{section:"x15.12.2",name:"15.12.2 parse ( text [ , reviver ] )"},{section:"x15.12.3",name:"15.12.3 stringify ( value [ , replacer [ , space ] ] )"},{section:"x16",name:"16 Errors"},{section:"A",name:"Annex A (informative) Grammar Summary"},{section:"A.1",name:"A.1 Lexical Grammar"},{section:"A.2",name:"A.2 Number Conversions"},{section:"A.3",name:"A.3 Expressions"},{section:"A.4",name:"A.4 Statements"},{section:"A.5",name:"A.5 Functions and Programs"},{section:"A.6",name:"A.6 Universal Resource Identifier Character Classes"},{section:"A.7",name:"A.7 Regular Expressions"},{section:"A.8",name:"A.8 JSON"},{section:"A.8.1",name:"A.8.1 JSON Lexical Grammar"},{section:"A.8.2",name:"A.8.2 JSON Syntactic Grammar"},{section:"B",name:"Annex B (informative) Compatibility"},{section:"B.1",name:"B.1 Additional Syntax"},{section:"B.1.1",name:"B.1.1 Numeric Literals"},{section:"B.1.2",name:"B.1.2 String Literals"},{section:"B.2",name:"B.2 Additional Properties"},{section:"B.2.1",name:"B.2.1 escape (string)"},{section:"B.2.2",name:"B.2.2 unescape (string)"},{section:"B.2.3",name:"B.2.3 String.prototype.substr (start, length)"},{section:"B.2.4",name:"B.2.4 Date.prototype.getYear ( )"},{section:"B.2.5",name:"B.2.5 Date.prototype.setYear (year)"},{section:"B.2.6",name:"B.2.6 Date.prototype.toGMTString ( )"},{section:"C",name:"Annex C (informative) The Strict Mode of ECMAScript"},{section:"D",name:"Annex D (informative) Corrections and Clarifications in the 5th Edition with Possible 3rd Edition Compatibility Impact"},{section:"E",name:"Annex E (informative) Additions and Changes in the 5th Edition that Introduce Incompatibilities with the 3rd Edition"},{section:"bibliography",name:"Bibliography"}],bot.addCommand({name:"spec",fun:e,permissions:{del:"NONE"},description:"Find a section in the ES5 spec"})
}(),function(){function e(e,n){function o(e){if(e.error_message)return r(e.error_message),void 0;var n,o=e.items[0];n=o?t(o,s):"User "+a+" not found",r(n)}function r(t){n?n(t):e.reply(t)}var i=e.parse(),a=i[0],s="extended"===i[1];return a?/^\d+$/.test(a)||(a=e.findUserid(s?a:i.slice().join(" "))):a=e.get("user_id"),0>a?"User Elusio proved elusive.":.1>=Math.random()?(r("That dude sucks"),void 0):(IO.jsonp({url:"https://api.stackexchange.com/2.0/users/"+a,data:{site:bot.adapter.site,filter:"!G*klMsSp1IcBUKxXMwhRe8TaI("},fun:o}),void 0)}function t(e,t){e=n(e);var a=r.supplant(e);return t&&(a+=i.supplant(o(e))),a}function n(e){return e=Object.merge({question_count:0,answer_count:0,reputation_change_day:0},e),e.ratio=!e.question_count&&e.answer_count?"H̸̡̪̯ͨ͊̽̅̾̎Ȩ̬̩̾͛ͪ̈́̀́͘ ̶̧̨̱̹̭̯ͧ̾ͬC̷̙̲̝͖ͭ̏ͥͮ͟Oͮ͏̮̪̝͍M̲̖͊̒ͪͩͬ̚̚͜Ȇ̴̟̟͙̞ͩ͌͝S̨̥̫͎̭ͯ̿̔̀ͅ":!e.answer_count&&e.question_count?"TO͇̹̺ͅƝ̴ȳ̳ TH̘Ë͖́̉ ͠P̯͍̭O̚​N̐Y̡":e.answer_count||e.question_count?Math.ratio(e.question_count,e.answer_count):"http://i.imgur.com/F79hP.png",bot.log(e,"/stat normalized"),e}function o(e){return e=Object.merge(e.badge_counts,e),e.avg_rep_post=(e.reputation/(e.question_count+e.answer_count)).maxDecimal(2),1/0===e.avg_rep_post&&(e.avg_rep_post="T͎͍̘͙̖̤̉̌̇̅ͯ͋͢͜͝H̖͙̗̗̺͚̱͕̒́͟E̫̺̯͖͎̗̒͑̅̈ ̈ͮ̽ͯ̆̋́͏͙͓͓͇̹<̩̟̳̫̪̇ͩ̑̆͗̽̇͆́ͅC̬͎ͪͩ̓̑͊ͮͪ̄̚̕Ě̯̰̤̗̜̗͓͛͝N̶̴̞͇̟̲̪̅̓ͯͅT͍̯̰͓̬͚̅͆̄E̠͇͇̬̬͕͖ͨ̔̓͞R͚̠̻̲̗̹̀>̇̏ͣ҉̳̖̟̫͕ ̧̛͈͙͇͂̓̚͡C͈̞̻̩̯̠̻ͥ̆͐̄ͦ́̀͟A̛̪̫͙̺̱̥̞̙ͦͧ̽͛̈́ͯ̅̍N̦̭͕̹̤͓͙̲̑͋̾͊ͣŅ̜̝͌͟O̡̝͍͚̲̝ͣ̔́͝Ť͈͢ ̪̘̳͔̂̒̋ͭ͆̽͠H̢͈̤͚̬̪̭͗ͧͬ̈́̈̀͌͒͡Ơ̮͍͇̝̰͍͚͖̿ͮ̀̍́L͐̆ͨ̏̎͡҉̧̱̯̤̹͓̗̻̭ͅḐ̲̰͙͑̂̒̐́̊"),bot.log(e,"/stat extended"),e}var r="[{display_name}]({link}) has {reputation} reputation, earned {reputation_change_day} rep today, asked {question_count} questions, gave {answer_count} answers, for a q:a ratio of {ratio}.\n",i="avg. rep/post: {avg_rep_post}. Badges: {gold}g {silver}s {bronze}b ";bot.addCommand({name:"stat",fun:e,permissions:{del:"NONE"},description:"Gives useless stats on a user. `/stat usrid|usrname [extended]`",async:!0})}(),function(){function e(e){var n=RegExp(e.matches[2],e.matches[4]),o=e.matches[3];if(!e.matches[2])return"Empty regex is empty";var r=t(n,e.get("message_id"));if(!r)return"No matching message (are you sure we're in the right room?)";var i=r.previousElementSibling.href;return r.textContent.replace(n,o)+" "+e.link("(source)",i)}function t(e,t){function n(n){var o=Number(n.parentElement.id.match(/\d+/)[0]);return t>o&&e.test(n.textContent)}var o=[].slice.call(document.getElementsByClassName("content")).reverse();return o.first(n)}var n=/^\s*s(\/|\|)((?:(?:\\\1)|[^\1])*?)\1((?:(?:\\\1)|[^\1])*?)\1(g?i?)/;bot.listen(n,e)}(),function(){function e(e){var t=e.parse(),n=t.shift(),r=t.shift();return o[n]?o[n](r):"Action {0} not recognized, see `/help timer`".supplant(n)}var t=Object.create(null),n=0,o={start:function(e){return void 0===e&&(e=n++),t[e]=Date.now(),"Registered timer "+e},stop:function(e){if(void 0===e)return"You must provide a timer name";var n=t[e];if(!n)return"I have no knowledge of timer "+e;var o=Date.now()-n;return delete t[e],o+"ms"}};bot.addCommand({name:"timer",fun:e,permissions:{del:"NONE"},description:"Starts/stops a timer. `/timer start [name]` starts a timer, `/timer stop name` stops a timer."})}(),function(){var e=JSON.parse(localStorage.getItem("bot_todo")||"{}"),t=function(t){var n=e[t],o=[];return n||(n=e[t]=[]),{get:function(e){return n.slice(e).map(function(e,t){return"("+t+")"+e}).join(", ")},add:function(e){return n.push(e),!0},remove:function(e){var t=n.indexOf(e);return-1===t?!1:this.removeByIndex(t)},removeByIndex:function(e){return e>=n.length?!1:(o.push(e),!0)},save:function(){bot.log(o.slice(),n.slice()),n=n.filter(function(e,t){return-1===o.indexOf(t)}),o.length=0,e[t]=n,localStorage.bot_todo=JSON.stringify(e)},exists:function(e){return e=e.toLowerCase(),n.some(function(t){return e===t.toLowerCase()})}}}.memoize(),n={get:function(e,t){var n=e.get(t[0]);return n||"No items on your todo"},add:function(e,t){function n(t){return e.exists(t)?(o=t+" already exists.",!1):(e.add(t),!0)}var o="";return t.every(n),o||"Item(s) added."},rm:function(e,t){function n(t){if(/^\d+$/.test(t))e.removeByIndex(Number(t));else{if(!e.exists(t))return o=t+" does not exist.",!1;e.remove(t)}return!0}var o="";return t.every(n),o||"Item(s) removed."}},o=function(e){var o=e.parse();bot.log(o,"todo input"),o[0]||(o=["get"]);var r,i=o[0],a=t(e.get("user_id")),s=o.slice(1);return n[i]?(r=n[i](a,s),bot.log(r,"/todo "+i)):(r="Unidentified /todo action "+i,bot.log(r,"/todo unknown")),a.save(),r};bot.addCommand({name:"todo",fun:o,permissions:{del:"NONE"},description:"Your personal todo list. `get [count]` retrieves everything or count items. `add items` adds items to your todo list (make sure items with spaces are wrapped in quotes) `rm items|indices` removes items specified by indice or content"})}(),function(){var e={last_id:null,command:function(e,t){function n(n){t?t(n):e.reply(n)}var o=Number(e.parse()[0]);bot.log(o,"/undo input"),o||(o=this.last_id),o?this.remove(o,n):n("I've yet to say a word.")},remove:function(e,t){function n(e){var n;'"ok"'!==e&&(n=/it is too late/i.test(e)?"TimeError: Could not reach 88mph":/only delete your own/i.test(e)?"I can only delete my own messages":"I have no idea what happened: "+e,t(n))}IO.xhr({url:"/messages/"+e+"/delete",data:fkey(),method:"POST",complete:n})},update_id:function(e){this.last_id=JSON.parse(e.responseText).id}};IO.register("sendoutput",e.update_id,e),bot.addCommand({name:"undo",fun:e.command,thisArg:e,permissions:{del:"NONE",use:"OWNER"},description:"Undo (delete) specified or last message. `/undo [msgid]`"})}(),IO.register("input",function(e){1386886===e.user_id&&.005>Math.random()&&bot.adapter.out.add(bot.adapter.reply(e.user_name)+" The Game")}),function(){var e,t,n,o=/^\s*(choose|should)?.*\sor\s[^$]/i,r=RegExp("\b("+["am","are","can","could","do","does","is","may","might","shall","should","will","would"].map(RegExp.escape).join("|")+")\b","i"),i={he:"He",i:"You",it:"It",she:"She",they:"They",we:"You",you:"I"};t=["SSdtIG5vdCBzdXJl","RVJST1IgQ0FMQ1VMQVRJTkcgUkVTVUxU","SSBrbm93IGp1c3Qgb25lIHRoaW5nLCBhbmQgdGhhdCBpcyB0aGF0IEknbSBhIGx1bWJlcmphY2s="].map(atob),n=["VGhhdCdzIG5vdCByZWFsbHkgYSBjaG9pY2UsIG5vdyBpcyBpdD8=","U291bmRzIGxpa2UgeW91IGhhdmUgYWxyZWFkeSBkZWNpZGVk","Q2hlYXRlciBjaGVhdGVyIHlvdXIgaG91c2UgaXMgYSBoZWF0ZXI="].map(atob),e=["QWJzb2x1dGVseSBub3Q=","QWJzb2x1dGVseSBub3Q=","QWJzb2x1dGVseSBub3Q=","QWxsIHNpZ25zIHBvaW50IHRvIG5v","QWxsIHNpZ25zIHBvaW50IHRvIG5v","QWxsIHNpZ25zIHBvaW50IHRvIG5v","QWxsIHNpZ25zIHBvaW50IHRvIHllcw==","QWxsIHNpZ25zIHBvaW50IHRvIHllcw==","QWxsIHNpZ25zIHBvaW50IHRvIHllcw==","QnV0IG9mIGNvdXJzZQ==","QnV0IG9mIGNvdXJzZQ==","QnV0IG9mIGNvdXJzZQ==","QnkgYWxsIG1lYW5z","QnkgYWxsIG1lYW5z","QnkgYWxsIG1lYW5z","Q2VydGFpbmx5IG5vdA==","Q2VydGFpbmx5IG5vdA==","Q2VydGFpbmx5IG5vdA==","Q2VydGFpbmx5","Q2VydGFpbmx5","Q2VydGFpbmx5","RGVmaW5pdGVseQ==","RGVmaW5pdGVseQ==","RGVmaW5pdGVseQ==","RG91YnRmdWxseQ==","RG91YnRmdWxseQ==","RG91YnRmdWxseQ==","SSBjYW4gbmVpdGhlciBjb25maXJtIG5vciBkZW55","SSBleHBlY3Qgc28=","SSBleHBlY3Qgc28=","SSBleHBlY3Qgc28=","SSdtIG5vdCBzbyBzdXJlIGFueW1vcmUuIEl0IGNhbiBnbyBlaXRoZXIgd2F5","SW1wb3NzaWJsZQ==","SW1wb3NzaWJsZQ==","SW1wb3NzaWJsZQ==","SW5kZWVk","SW5kZWVk","SW5kZWVk","SW5kdWJpdGFibHk=","SW5kdWJpdGFibHk=","SW5kdWJpdGFibHk=","Tm8gd2F5","Tm8gd2F5","Tm8gd2F5","Tm8=","Tm8=","Tm8=","Tm8=","Tm9wZQ==","Tm9wZQ==","Tm9wZQ==","Tm90IGEgY2hhbmNl","Tm90IGEgY2hhbmNl","Tm90IGEgY2hhbmNl","Tm90IGF0IGFsbA==","Tm90IGF0IGFsbA==","Tm90IGF0IGFsbA==","TnVoLXVo","TnVoLXVo","TnVoLXVo","T2YgY291cnNlIG5vdA==","T2YgY291cnNlIG5vdA==","T2YgY291cnNlIG5vdA==","T2YgY291cnNlIQ==","T2YgY291cnNlIQ==","T2YgY291cnNlIQ==","UHJvYmFibHk=","UHJvYmFibHk=","UHJvYmFibHk=","WWVzIQ==","WWVzIQ==","WWVzIQ==","WWVzIQ==","WWVzLCBhYnNvbHV0ZWx5","WWVzLCBhYnNvbHV0ZWx5","WWVzLCBhYnNvbHV0ZWx5"].map(atob),bot.listen(o,function(e){function o(){var t;do t=s.random();while(t===l);e.reply("Wait, I changed my mind! "+r(t))}function r(e){return e.replace(/(should(?:n'?t)?) (\S+)/,a)}function a(e,t,n){var o,r=n.toLowerCase();return o=i.hasOwnProperty(r)?i[r]:n,o+" "+t}for(var s=e.replace(/^\s*choose\s/i,"").replace(/\?$/,"").split(/\s*\bor\b\s*/i).filter(Boolean),c=s.length,u=1,m=!0;c>u;u++)if(s[u]!==s[u-1]){m=!1;break}if(m)return n.random();if(.01>Math.random())return 2===c?"Both!":"All of them!";if(.01>Math.random())return 2===c?"Neither":"None of them!";if(.01>Math.random())return t.random();var l=s.random();return.01>Math.random()&&(bot.log("weasel decision mind change jedi nun-chuck"),setTimeout(o,1e4)),r(l)}),bot.listen(r,function(){return e.random()})}(),function(){"use strict";function e(e){var o=n.exec(e);if(o)t.latlon(o[1],o[2],e.reply.bind(e));else{if(!e.content)return"See `/help weather` for usage info";t.city(e.content,e.reply.bind(e))}}var t={latlon:function(e,t,n){var o=Number(e),r=Number(t),i=[];(-180>o||o>180)&&i.push("Latitude must be between -180 and 180"),(-180>r||r>180)&&i.push("Longitude must be between -180 and 180"),i.length&&n(i.join("; ")),IO.jsonp({url:"http://api.openweathermap.org/data/2.1/find/city",jsonpName:"callback",data:{lat:e,lon:t,cnt:1,type:"json"},fun:this.finishCb(n)})},city:function(e,t){IO.jsonp({url:"http://api.openweathermap.org/data/2.1/find/name",jsonpName:"callback",data:{q:e,type:"json"},fun:this.finishCb(t)})},finishCb:function(e){var t=this;return function(n){e(t.format(n))}},format:function(e){var t=e.list;return t?t.map(this.formatter).join("; "):(console.error(e),"Sorry, I couldn't get the data: "+e.message)},formatter:function(e){var t,n=e.main;n.celsius=(n.temp-273.15).maxDecimal(4),t=bot.adapter.link(e.name,"http://openweathermap.org/city/"+e.id)+": {celsius}C ({temp}K)".supplant(n);var o=(e.weather||[]).map(function(e){return e.description}).join(", ");return o&&(t+=", "+o),t}},n=/\((-?\d+\.?\d*),\s*(-?\d+\.?\d*)\)/;bot.addCommand({name:"weather",fun:e,permissions:{del:"NONE"},async:!0,description:"Gets current weather: `/weather (lan, lon)` or `/weather city`"})}(),function(){"use strict";function e(e,t){bot.adapter.out.add(bot.adapter.reply(e)+" "+n,t)}var t=JSON.parse(localStorage.bot_users||"{}"),n="Welcome to the JavaScript chat! Please review the "+bot.adapter.link("room pseudo-rules","http://rlemon.github.com/so-chat-javascript-rules/")+". "+"Please don't ask if you can ask or if anyone's around; just ask "+"your question, and if anyone's free and interested they'll help.";IO.register("userregister",function(n,o){function r(t){var r=Date.parse(/since.+cell">(\d{4}-\d{2}-\d{2})/.exec(t)[1]);12096e5>Date.now()-r&&e(n.name,o),i()}function i(){t[n.id]=!0,localStorage.bot_users=JSON.stringify(t)}17!==Number(o)||t[n.id]||bot.isOwner(n.id)||n.reputation>1e3||20>n.reputation||IO.xhr({method:"GET",url:"/users/"+n.id,complete:r})}),bot.addCommand({name:"welcome",fun:function(t){return t.length?(e(t,t.get("roomid")),void 0):n},permission:{del:"NONE"},description:"Welcomes a user. `/welcome user`"})}(),function(){function e(e){function n(n){var o=n.feed.entry;o&&o.length?e.send(o[0].link[0].href):e.reply(t.random())}IO.jsonp({url:"https://gdata.youtube.com/feeds/api/videos",jsonpName:"callback",data:{q:""+e,"max-results":1,v:2,alt:"json"},fun:n})}var t=["Video not found (rule 35?)","I could not find such a video","The Lords of YouTube did not find your query favorable"];bot.addCommand({name:"youtube",fun:e,permissions:{del:"NONE"},description:"Search Youtube. `/youtube query`",async:!0})}();